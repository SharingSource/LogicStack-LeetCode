### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[522. æœ€é•¿ç‰¹æ®Šåºåˆ— II](https://leetcode.cn/problems/longest-uncommon-subsequence-ii/solution/by-ac_oier-vuez/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒLCSã€ã€ã€Œæœ€é•¿å…¬å…±å­åºåˆ—ã€ã€ã€Œåºåˆ— DPã€ã€ã€Œæšä¸¾ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€



ç»™å®šå­—ç¬¦ä¸²åˆ—è¡¨Â `strs`ï¼Œè¿”å›å…¶ä¸­ æœ€é•¿çš„ç‰¹æ®Šåºåˆ—ã€‚å¦‚æœæœ€é•¿ç‰¹æ®Šåºåˆ—ä¸å­˜åœ¨ï¼Œè¿”å› $-1$ ã€‚

ç‰¹æ®Šåºåˆ—å®šä¹‰å¦‚ä¸‹ï¼šè¯¥åºåˆ—ä¸ºæŸå­—ç¬¦ä¸²ç‹¬æœ‰çš„å­åºåˆ—ï¼ˆå³ä¸èƒ½æ˜¯å…¶ä»–å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼‰ã€‚

`s`Â çš„å­åºåˆ—å¯ä»¥é€šè¿‡åˆ å»å­—ç¬¦ä¸²Â `s`Â ä¸­çš„æŸäº›å­—ç¬¦å®ç°ã€‚

* ä¾‹å¦‚ï¼Œ`"abc"`Â æ˜¯ `"aebdc"`Â çš„å­åºåˆ—ï¼Œå› ä¸ºæ‚¨å¯ä»¥åˆ é™¤ `"aebdc"` ä¸­çš„ä¸‹åˆ’çº¿å­—ç¬¦æ¥å¾—åˆ° `"abc"`ã€‚`"aebdc"` çš„å­åºåˆ—è¿˜åŒ…æ‹¬ `"aebdc"`ã€ `"aeb"`Â å’Œ `""`Â (ç©ºå­—ç¬¦ä¸²)ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥: strs = ["aba","cdc","eae"]

è¾“å‡º: 3
```
ç¤ºä¾‹ 2:
```
è¾“å…¥: strs = ["aaa","aaa","aa"]

è¾“å‡º: -1
```

æç¤º:
* $2 <= strs.length <= 50$
* $1 <= strs[i].length <= 10$
* `strs[i]`Â åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯

---

### LCS

è®° `strs` æ•°ç»„é•¿åº¦ä¸º $n$ï¼Œå•ä¸ª $strs[i]$ çš„æœ€å¤§é•¿åº¦ $m$ã€‚å…¶ä¸­ $n$ æ•°æ®èŒƒå›´ä¸º $50$ï¼Œ$m$ æ•°æ®èŒƒå›´ä¸º $10$ã€‚

æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬å¯ä»¥æšä¸¾æ¯ä¸ª $s1 = str[i]$ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºå…¶ä»– $s2 = strs[j]$ çš„å­åºåˆ—ï¼Œè¿™éœ€è¦æšä¸¾æ‰€æœ‰ç‚¹å¯¹ï¼Œå¤æ‚åº¦ä¸º $O(n^2)$ã€‚åŒæ—¶è®°å½•éå†è¿‡ç¨‹ä¸­çš„æœ€å¤§é•¿åº¦ `ans`ï¼Œç”¨äºå‰ªæï¼ˆå¯¹äºå­—ç¬¦ä¸²é•¿åº¦æœ¬èº«å°äºç­‰äº `ans` çš„ $strs[i]$ å¯ç›´æ¥è·³è¿‡ï¼‰ã€‚

æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ª `check` å‡½æ•°æ¥æ£€æŸ¥ `s1` æ˜¯å¦ä¸º `s2` çš„å­åºåˆ—ï¼Œè¯¥é—®é¢˜å¯è½¬åŒ–ä¸ºæ±‚ `s1` å’Œ `s2` çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ã€‚è‹¥æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º `s1` é•¿åº¦ï¼Œè¯´æ˜ `s1` ä¸º `s2` çš„å­åºåˆ—ï¼Œæ­¤æ—¶ $strs[i]$ ä¸æ»¡è¶³æ¡ä»¶ï¼Œå¦åˆ™æˆ‘ä»¬ä½¿ç”¨ $strs[i]$ çš„é•¿åº¦æ¥æ›´æ–° `ans`ã€‚`check` å‡½æ•°çš„å¤æ‚åº¦ä¸º $O(m^2)$ã€‚

> **ä¸äº†è§£ LCS çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ : [LCS æ¨¡æ¿é¢˜](https://mp.weixin.qq.com/s/TXKCBFBIQ_cjrgCiK4IVYg)**

å› æ­¤æ€»çš„è®¡ç®—é‡ä¸º $n^2 \times m^2 = 2.5 \times 10^5$ï¼Œå¯ä»¥è¿‡ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int findLUSlength(String[] strs) {
        int n = strs.length, ans = -1;
        for (int i = 0; i < n; i++) {
            if (strs[i].length() <= ans) continue;
            boolean ok = true;
            for (int j = 0; j < n && ok; j++) {
                if (i == j) continue;
                if (check(strs[i], strs[j])) ok = false;
            }
            if (ok) ans = strs[i].length();
        }
        return ans;
    }
    boolean check(String s1, String s2) {
        int n = s1.length(), m = s2.length();
        if (m < n) return false;
        int[][] f = new int[n + 1][m + 1];
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j <= m; j++) {
                f[i][j] = s1.charAt(i - 1) == s2.charAt(j - 1) ? f[i - 1][j - 1] + 1 : f[i - 1][j - 1];
                f[i][j] = Math.max(f[i][j], f[i - 1][j]);
                f[i][j] = Math.max(f[i][j], f[i][j - 1]);
                if (f[i][j] == n) return true;
            }
        }
        return false;
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int findLUSlength(vector<string>& strs) {
        int n = strs.size(), ans = -1;
        for (int i = 0; i < n; i++) {
            if (static_cast<int>(strs[i].length()) <= ans) continue;
            bool ok = true;
            for (int j = 0; j < n && ok; j++) {
                if (i == j) continue;
                if (check(strs[i], strs[j])) ok = false;
            }
            if (ok) ans = strs[i].length();
        }
        return ans;
    }
    bool check(const string& s1, const string& s2) {
        int n = s1.length(), m = s2.length();
        if (m < n) return false;
        vector<vector<int>> f(n + 1, vector<int>(m + 1, 0));
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j <= m; j++) {
                f[i][j] = s1[i - 1] == s2[j - 1] ? f[i - 1][j - 1] + 1 : f[i - 1][j - 1];
                f[i][j] = max(f[i][j], f[i - 1][j]);
                f[i][j] = max(f[i][j], f[i][j - 1]);
                if (f[i][j] == n) return true;
            }
        }
        return false;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def findLUSlength(self, strs: List[str]) -> int:
        n, ans = len(strs), -1
        for i in range(n):
            if len(strs[i]) <= ans:
                continue
            ok = True
            for j in range(n):
                if not ok:
                    break
                if i == j:
                    continue
                if self.check(strs[i], strs[j]):
                    ok = False
            if ok:
                ans = len(strs[i])
        return ans

    def check(self, s1, s2):
        n, m = len(s1), len(s2)
        if m < n:
            return False
        f = [[0] * (m + 1) for _ in range(n + 1)]
        for i in range(1, n + 1):
            for j in range(1, m + 1):
                f[i][j] = f[i - 1][j - 1] + 1 if s1[i - 1] == s2[j - 1] else f[i - 1][j - 1]
                f[i][j] = max(f[i][j], f[i - 1][j], f[i][j - 1])
                if f[i][j] == n:
                    return True
        return False
```
TypeScript ä»£ç ï¼š
```TypeScript
function check(s1: string, s2: string): boolean {
    const n = s1.length, m = s2.length;
    if (m < n) return false;
    const f = Array.from({ length: n + 1 }, () => Array(m + 1).fill(0));
    for (let i = 1; i <= n; i++) {
        for (let j = 1; j <= m; j++) {
            f[i][j] = s1[i - 1] === s2[j - 1] ? f[i - 1][j - 1] + 1 : 0;
            f[i][j] = Math.max(f[i][j], f[i - 1][j]);
            f[i][j] = Math.max(f[i][j], f[i][j - 1]);
            if (f[i][j] === n) return true;
        }
    }
    return false;
}
function findLUSlength(strs: string[]): number {
    let n = strs.length, ans = -1;
    for (let i = 0; i < n; i++) {
        if (strs[i].length <= ans) continue;
        let ok = true;
        for (let j = 0; j < n && ok; j++) {
            if (i === j) continue;
            if (check(strs[i], strs[j])) ok = false;
        }
        if (ok) ans = strs[i].length;
    }
    return ans;
};
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ£€æŸ¥æ¯ä¸ª $strs[i]$ æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œéœ€è¦æšä¸¾æ‰€æœ‰çš„ç‚¹å¯¹ï¼Œå¤æ‚åº¦ä¸º $O(n^2)$ï¼›æ±‚è§£ LCS é—®é¢˜çš„å¤æ‚åº¦ä¸º $O(m^2)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n^2 \times m^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m^2)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.522` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

