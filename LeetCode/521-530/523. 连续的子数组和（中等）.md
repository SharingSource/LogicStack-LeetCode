### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[523. è¿ç»­çš„å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/continuous-subarray-sum/solution/gong-shui-san-xie-tuo-zhan-wei-qiu-fang-1juse/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå‰ç¼€å’Œã€




ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°Â `k` ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­è¯¥æ•°ç»„æ˜¯å¦å«æœ‰åŒæ—¶æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è¿ç»­å­æ•°ç»„ï¼š

* å­æ•°ç»„å¤§å°è‡³å°‘ä¸º `2` 
* å­æ•°ç»„å…ƒç´ æ€»å’Œä¸º `k` çš„å€æ•°

å¦‚æœå­˜åœ¨ï¼Œè¿”å› `true`ï¼Œå¦åˆ™ï¼Œè¿”å› `false`ã€‚

å¦‚æœå­˜åœ¨ä¸€ä¸ªæ•´æ•° `n` ï¼Œä»¤æ•´æ•° `x` ç¬¦åˆ `x = n * k` ï¼Œåˆ™ç§° `x` æ˜¯ `k` çš„ä¸€ä¸ªå€æ•°ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [23,2,4,6,7], k = 6

è¾“å‡ºï¼štrue

è§£é‡Šï¼š[2,4] æ˜¯ä¸€ä¸ªå¤§å°ä¸º 2 çš„å­æ•°ç»„ï¼Œå¹¶ä¸”å’Œä¸º 6 ã€‚
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [23,2,6,4,7], k = 6

è¾“å‡ºï¼štrue

è§£é‡Šï¼š[23, 2, 6, 4, 7] æ˜¯å¤§å°ä¸º 5 çš„å­æ•°ç»„ï¼Œå¹¶ä¸”å’Œä¸º 42 ã€‚ 
42 æ˜¯ 6 çš„å€æ•°ï¼Œå› ä¸º 42 = 7 * 6 ä¸” 7 æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šnums = [23,2,6,4,7], k = 13

è¾“å‡ºï¼šfalse
```

æç¤ºï¼š
* $1 <= nums.length <= 10^5$
* $0 <= nums[i] <= 10^9$
* $0 <= sum(nums[i]) <= 2^{31} - 1$
* $1 <= k <= 2^{31} - 1$

---

### åŸºæœ¬åˆ†æ

è¿™æ˜¯ä¸€é“å¾ˆç»å…¸çš„å‰ç¼€å’Œé¢˜ç›®ï¼Œç±»ä¼¼çš„åŸé¢˜ä¹Ÿåœ¨è“æ¡¥æ¯å‡ºç°è¿‡ï¼Œåæ ‡åœ¨ [K å€åŒºé—´](http://lx.lanqiao.cn/problem.page?gpid=T444) http://lx.lanqiao.cn/problem.page?gpid=T444ã€‚

æœ¬é¢˜ä¸é‚£é“é¢˜ä¸åŒåœ¨äºï¼š

* [K å€åŒºé—´] éœ€è¦æ±‚å¾—æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åŒºé—´æ•°é‡ï¼›æœ¬é¢˜éœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚
* [K å€åŒºé—´] åºåˆ—å…¨æ˜¯æ­£æ•´æ•°ï¼Œä¸éœ€è¦è€ƒè™‘ $0$ å€¼é—®é¢˜ï¼›æœ¬é¢˜éœ€è¦è€ƒè™‘ $0$ å€¼é—®é¢˜ã€‚

æ•°æ®èŒƒå›´ä¸º $10^4$ï¼Œå› æ­¤æ— è®ºæ˜¯çº¯æœ´ç´ çš„åšæ³• ($O(n^3)$)è¿˜æ˜¯ç®€å•ä½¿ç”¨å‰ç¼€å’Œä¼˜åŒ–çš„åšæ³• ($O(n^2)$) éƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚

æˆ‘ä»¬éœ€è¦ä» $k$ çš„å€æ•°ä½œä¸ºåˆ‡å…¥ç‚¹æ¥åšã€‚

é¢„å¤„ç†å‰ç¼€å’Œæ•°ç»„ $sum$ï¼Œæ–¹ä¾¿å¿«é€Ÿæ±‚å¾—æŸä¸€æ®µåŒºé—´çš„å’Œã€‚ç„¶åå‡å®š $[i, j]$ æ˜¯æˆ‘ä»¬çš„ç›®æ ‡åŒºé—´ï¼Œé‚£ä¹ˆæœ‰ï¼š

$$
sum[j] - sum[i - 1] = n \times k
$$

ç»è¿‡ç®€å•çš„å˜å½¢å¯å¾—ï¼š

$$
\frac{sum[j]}{k} - \frac{sum[i - 1]}{k} = n
$$

**è¦ä½¿å¾—ä¸¤è€…é™¤ $k$ ç›¸å‡ä¸ºæ•´æ•°ï¼Œéœ€è¦æ»¡è¶³ $sum[j]$ å’Œ $sum[i - 1]$ å¯¹ $k$ å–ä½™ç›¸åŒã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æšä¸¾å³ç«¯ç‚¹ $j$ï¼Œç„¶ååœ¨æšä¸¾å³ç«¯ç‚¹ $j$ çš„æ—¶å€™æ£€æŸ¥ä¹‹å‰æ˜¯å¦å‡ºç°è¿‡å·¦ç«¯ç‚¹ $i$ï¼Œä½¿å¾— $sum[j]$ å’Œ $sum[i - 1]$ å¯¹ $k$ å–ä½™ç›¸åŒã€‚

---

### å‰ç¼€å’Œ + HashSet

å…·ä½“çš„ï¼Œä½¿ç”¨ `HashSet` æ¥ä¿å­˜å‡ºç°è¿‡çš„å€¼ã€‚

è®©å¾ªç¯ä» $2$ å¼€å§‹æšä¸¾å³ç«¯ç‚¹ï¼ˆæ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œå­æ•°ç»„é•¿åº¦è‡³å°‘ä¸º $2$ï¼‰ï¼Œæ¯æ¬¡å°†ç¬¦åˆé•¿åº¦è¦æ±‚çš„ä½ç½®çš„å–ä½™ç»“æœå­˜å…¥ `HashSet`ã€‚

å¦‚æœæšä¸¾æŸä¸ªå³ç«¯ç‚¹ $j$ æ—¶å‘ç°å­˜åœ¨æŸä¸ªå·¦ç«¯ç‚¹ $i$ ç¬¦åˆè¦æ±‚ï¼Œåˆ™è¿”å› `True`ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public boolean checkSubarraySum(int[] nums, int k) {
        int n = nums.length;
        int[] sum = new int[n + 1];
        for (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + nums[i - 1];
        Set<Integer> set = new HashSet<>();
        for (int i = 2; i <= n; i++) {
            set.add(sum[i - 2] % k);
            if (set.contains(sum[i] % k)) return true;
        }
        return false;
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    bool checkSubarraySum(vector<int>& nums, int k) {
        int n = nums.size();
        vector<long long> sumv(n + 1, 0);
        for (int i = 1; i <= n; i++) sumv[i] = sumv[i - 1] + nums[i - 1];
        unordered_set<int> seen;
        for (int i = 2; i <= n; i++) {
            seen.insert(sumv[i - 2] % k);
            if (seen.count(sumv[i] % k)) return true;
        }
        return false;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def checkSubarraySum(self, nums: List[int], k: int) -> bool:
        n = len(nums)
        sumv = [0] * (n + 1)
        for i in range(1, n + 1):
            sumv[i] = sumv[i - 1] + nums[i - 1]
        ss = set()
        for i in range(2, n + 1):
            ss.add(sumv[i - 2] % k)
            if (sumv[i] % k) in ss:
                return True
        return False
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### æ‹“å±•ï¼ˆæ±‚æ–¹æ¡ˆæ•°ï¼‰

è“æ¡¥æ¯å®˜ç½‘ç™»å½•ç»å¸¸æ€§ç½¢å·¥ï¼Œæˆ‘ç™»å½•åå‡ æ¬¡éƒ½æ²¡ç™»å½•ä¸Šå»ï¼Œè¿™é‡Œç›´æ¥æˆªå›¾äº† [K å€åŒºé—´] çš„é¢˜ç›®ç»™å¤§å®¶ã€‚

![](https://pic.leetcode-cn.com/1622600090-GOyehD-image.png)

å†™äº†ä»£ç ï¼Œä½†å¾ˆå¯æƒœæ²¡ `OJ` å¯ä»¥æµ‹è¯• ğŸ¤£ 

æ¯”è¾ƒç®€å•ï¼Œåº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ ğŸ¤£

Java ä»£ç ï¼š
```Java
import java.util.*;
class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(), k = sc.nextInt();
        long[] s  = new long[n + 1];
        for (int i = 1; i <= n; i++) s[i] = s[i - 1] + sc.nextLong();
        long ans = 0;
        Map<Long, Integer> map = new HashMap<>();
        map.put(0L, 1);
        for (int i = 1 ; i <= n; i++) {
            long u = s[i] % k;
            if (map.containsKey(u)) ans += map.get(u);
            map.put(u, map.getOrDefault(u, 0) + 1);
        }
        System.out.println(ans);
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.523` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

