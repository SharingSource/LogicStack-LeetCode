### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[137. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— II](https://leetcode-cn.com/problems/single-number-ii/solution/gong-shui-san-xie-yi-ti-san-jie-ha-xi-bi-fku8/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå“ˆå¸Œè¡¨ã€ã€ã€Œä½è¿ç®—ã€



ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â nums ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° ä¸€æ¬¡ å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° ä¸‰æ¬¡ ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚


ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [2,2,3,2]

è¾“å‡ºï¼š3
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [0,1,0,1,0,1,99]

è¾“å‡ºï¼š99
```

æç¤ºï¼š
* 1 <= nums.length <= 3 * $10^4$

* -$2^{31}$ <= nums[i] <= $2^{31}$ - 1

* nums ä¸­ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° ä¸€æ¬¡ å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° ä¸‰æ¬¡

  

è¿›é˜¶ï¼šä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ



---

### å“ˆå¸Œè¡¨

ä¸€ä¸ªæœ´ç´ çš„åšæ³•æ˜¯ä½¿ç”¨ã€Œå“ˆå¸Œè¡¨ã€è¿›è¡Œè®¡æ•°ï¼Œç„¶åå°†è®¡æ•°ä¸º $1$ çš„æ•°å­—è¿›è¡Œè¾“å‡ºã€‚

å“ˆå¸Œè¡¨ä»¥ã€Œæ•°å€¼ : æ•°å€¼å‡ºç°æ¬¡æ•°ã€å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int singleNumber(int[] nums) {
        Map<Integer, Integer> map = new HashMap<>();
        for (int x : nums) {
            map.put(x, map.getOrDefault(x, 0) + 1);
        }
        for (int x : map.keySet()) {
            if (map.get(x) == 1) return x;
        }
        return -1;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### ä½æ•°ç»Ÿè®¡ 

å“ˆå¸Œè¡¨è§£æ³•çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ çš„ï¼Œè€Œé¢˜ç›®çš„ã€è¿›é˜¶ã€‘éƒ¨åˆ†æåˆ°åº”å½“ä½¿ç”¨å¸¸æ•°ç©ºé—´æ¥åšã€‚

å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„åšæ³•ï¼Œæ˜¯åˆ©ç”¨ $int$ ç±»å‹å›ºå®šä¸º $32$ ä½ã€‚

**ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º $32$ çš„æ•°ç»„ $cnt[]$ è®°å½•ä¸‹æ‰€æœ‰æ•°å€¼çš„æ¯ä¸€ä½å…±å‡ºç°äº†å¤šå°‘æ¬¡ $1$ï¼Œå†å¯¹ $cnt[]$ æ•°ç»„çš„æ¯ä¸€ä½è¿›è¡Œ $mod$ $3$ æ“ä½œï¼Œé‡æ–°æ‹¼å‡‘å‡ºåªå‡ºç°ä¸€æ¬¡çš„æ•°å€¼ã€‚**

ä¸¾ä¸ª ğŸŒ°ï¼Œè€ƒè™‘æ ·ä¾‹ `[1,1,1,3]`ï¼Œ$1$ å’Œ $3$ å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«æ˜¯ `00..001` å’Œ `00..011`ï¼Œå­˜å…¥ $cnt[]$ æ•°ç»„åå¾—åˆ° `[0,0,...,0,1,4]`ã€‚è¿›è¡Œ $mod$ $3$ æ“ä½œåå¾—åˆ° `[0,0,...,0,1,1]`ï¼Œå†è½¬ä¸ºåè¿›åˆ¶æ•°å­—å³å¯å¾—ã€Œåªå‡ºç°ä¸€æ¬¡ã€çš„ç­”æ¡ˆ $3$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int singleNumber(int[] nums) {
        int[] cnt = new int[32];
        for (int x : nums) {
            for (int i = 0; i < 32; i++) {
                if (((x >> i) & 1) == 1) {
                    cnt[i]++;
                }
            }
        }
        int ans = 0;
        for (int i = 0; i < 32; i++) {
            if ((cnt[i] % 3 & 1) == 1) {
                ans += (1 << i);
            }
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### DFA

å¦‚æœæˆ‘ä»¬è€ƒè™‘ã€Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ã€Œå¼‚æˆ–ã€è¿ç®—ã€‚

åˆ©ç”¨ç›¸åŒæ•°å¼‚æˆ–ä¸º 0 çš„æ€§è´¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½å®ç°çŠ¶æ€åˆ‡æ¢ï¼š

![image.png](https://pic.leetcode-cn.com/1619711233-IMBWOM-image.png)

æœ¬é¢˜æ˜¯è€ƒè™‘ã€Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸‰æ¬¡ã€çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯¹åº”äº†ã€Œå‡ºç° 0 æ¬¡ã€ã€ã€Œå‡ºç° 1 æ¬¡ã€å’Œã€Œå‡ºç° 2 æ¬¡ã€ä¸‰ç§çŠ¶æ€ï¼Œæ„å‘³ç€è‡³å°‘éœ€è¦ä¸¤ä½è¿›è¡Œè®°å½•ï¼Œä¸”çŠ¶æ€è½¬æ¢å…³ç³»ä¸ºï¼š

![image.png](https://pic.leetcode-cn.com/1619711751-eNDISi-image.png)

é‚£ä¹ˆå¦‚ä½•å°†ä¸Šè¿° DFA ç”¨è¡¨è¾¾å¼è¡¨ç¤ºå‡ºæ¥å‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

1. ç”¨ã€ŒçœŸå€¼è¡¨ã€å†™å‡ºã€Œé€»è¾‘å‡½æ•°è¡¨è¾¾å¼ã€å¯å‚è€ƒ [è¿™é‡Œ](https://wenku.baidu.com/view/e9460ad96729647d27284b73f242336c1eb930f0.html)ï¼ŒåŒ–ç®€è¿‡ç¨‹å¯ä»¥å‚è€ƒ [å¡è¯ºå›¾åŒ–ç®€æ³•](https://baike.baidu.com/item/%E5%8D%A1%E8%AF%BA%E5%9B%BE%E5%8C%96%E7%AE%80%E6%B3%95) ã€‚

2. æŠŠç»“è®ºè®°ä½ï¼ˆè¿™æ˜¯ä¸€é“ç»å…¸çš„ DFA å…¥é—¨é¢˜ï¼‰ã€‚

3. ç¡¬åšï¼Œä½è¿ç®—ä¹Ÿå°±é‚£å‡ ç§ï¼Œä¸ä¼šã€Œæ•°å­—ç”µè·¯ã€ä¹Ÿè®°ä¸ä½ã€Œç»“è®ºã€ï¼Œç ¸æ—¶é—´çœ‹ç€çœŸå€¼è¡¨ä¸æ–­è°ƒé€»è¾‘ä¹Ÿæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚


ä»£ç ï¼š
```Java []
class Solution {
    public int singleNumber(int[] nums) {
        int one = 0, two = 0;
        for(int x : nums){
            one = one ^ x & ~two;
            two = two ^ x & ~one;
        }
        return one;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$


---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.137` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆå°†æ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

