### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[131. åˆ†å‰²å›æ–‡ä¸²](https://leetcode-cn.com/problems/palindrome-partitioning/solution/wei-sha-yao-zhe-yang-bao-sou-ya-shi-ru-h-41gf/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå›æ–‡ä¸²ã€ã€ã€Œå›æº¯ç®—æ³•ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€



ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¯·ä½ å°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ å›æ–‡ä¸² ã€‚è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

å›æ–‡ä¸² æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚



ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "aab"
è¾“å‡ºï¼š[["a","a","b"],["aa","b"]]
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = "a"
è¾“å‡ºï¼š[["a"]]
```

æç¤ºï¼š
* 1 <= s.length <= 16
* s ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

---

### åŠ¨æ€è§„åˆ’ + å›æº¯ç®—æ³•

æ±‚æ‰€æœ‰çš„åˆ†å‰²æ–¹æ¡ˆï¼Œå‡¡æ˜¯æ±‚æ‰€æœ‰æ–¹æ¡ˆçš„é¢˜åŸºæœ¬ä¸Šéƒ½æ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ¡ˆï¼Œå°±æ˜¯ã€Œçˆ†æœã€ã€‚

é—®é¢˜åœ¨äºï¼Œçˆ†æœä»€ä¹ˆï¼Ÿæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥çˆ†æœæ¯ä¸ªå›æ–‡ä¸²çš„èµ·ç‚¹ã€‚å¦‚æœæœ‰è¿ç»­çš„ä¸€æ®µæ˜¯å›æ–‡ä¸²ï¼Œæˆ‘ä»¬å†å¯¹å‰©ä¸‹è¿ç»­çš„ä¸€æ®µç»§ç»­çˆ†æœã€‚

ä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥æ¥ç€å‰©ä¸‹ä¸€æ®µç»§ç»­çˆ†æœï¼Ÿ

å› ä¸ºä»»æ„çš„å­ä¸²æœ€ç»ˆå¿…ç„¶èƒ½å¤Ÿåˆ†å‰²æˆè‹¥å¹²çš„å›æ–‡ä¸²ï¼ˆæœ€åçš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå›æ–‡ä¸²éƒ½æ˜¯ä¸€ä¸ªå­—æ¯ï¼‰ã€‚

æ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡å¾€ä¸‹çˆ†æœæ—¶ï¼Œåªéœ€è¦ä¿è¯è‡ªèº«è¿ç»­ä¸€æ®µæ˜¯å›æ–‡ä¸²å³å¯ã€‚


ä¸¾ä¸ªğŸŒ° æ¥æ„Ÿå—ä¸‹æˆ‘ä»¬çš„çˆ†æœè¿‡ç¨‹ï¼Œå‡è®¾æœ‰æ ·ä¾‹ `abababa`ï¼Œåˆšå¼€å§‹æˆ‘ä»¬ä»èµ·ç‚¹ç¬¬ä¸€ä¸ª a è¿›è¡Œçˆ†æœï¼š

1. å‘ç° `a` æ˜¯å›æ–‡ä¸²ï¼Œå…ˆå°† `a` åˆ†å‰²å‡ºæ¥ï¼Œå†å¯¹å‰©ä¸‹çš„ `bababa` è¿›è¡Œçˆ†æœ
2. å‘ç° `aba` æ˜¯å›æ–‡ä¸²ï¼Œå…ˆå°† `aba` åˆ†å‰²å‡ºæ¥ï¼Œå†å¯¹å‰©ä¸‹çš„ `baba` è¿›è¡Œçˆ†æœ
3. å‘ç° `ababa` æ˜¯å›æ–‡ä¸²ï¼Œå…ˆå°† `ababa` åˆ†å‰²å‡ºæ¥ï¼Œå†å¯¹å‰©ä¸‹çš„ `ba` è¿›è¡Œçˆ†æœ
4. å‘ç° `abababa` æ˜¯å›æ–‡ä¸²ï¼Œå…ˆå°† `abababa` åˆ†å‰²å‡ºæ¥ï¼Œå†å¯¹å‰©ä¸‹çš„ `` è¿›è¡Œçˆ†æœ

...

ç„¶åå†å¯¹ä¸‹ä¸€ä¸ªèµ·ç‚¹ï¼ˆä¸‹ä¸ªå­—ç¬¦ï¼‰ `b` è¿›è¡Œçˆ†æœï¼Ÿ

ä¸éœ€è¦ã€‚

å› ä¸ºå•ä¸ªå­—ç¬¦æœ¬èº«æ„æˆäº†å›æ–‡ä¸²ï¼Œæ‰€ä»¥ä»¥ `b` ä¸ºèµ·ç‚¹ï¼Œ`b` ä¹‹å‰æ„æˆå›æ–‡ä¸²çš„æ–¹æ¡ˆï¼Œå¿…ç„¶è¦†ç›–åœ¨æˆ‘ä»¬ä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºèµ·ç‚¹æ‰€å±•å¼€çš„çˆ†æœæ–¹æ¡ˆå†…ï¼ˆåœ¨è¿™é‡Œå°±æ˜¯å¯¹åº”äº†ä¸Šè¿°çš„ç¬¬ä¸€æ­¥æ‰€å±•å¼€çš„çˆ†æœæ–¹æ¡ˆä¸­ï¼‰ã€‚

**å› æ­¤æˆ‘ä»¬åªéœ€è¦ä»¥é¦–ä¸ªå­—ç¬¦ä¸ºèµ·ç‚¹ï¼Œæšä¸¾ä»¥å…¶å¼€å¤´æ‰€æœ‰çš„å›æ–‡ä¸²æ–¹æ¡ˆï¼ŒåŠ å…¥é›†åˆï¼Œç„¶åå¯¹å‰©ä¸‹çš„å­—ç¬¦ä¸²éƒ¨åˆ†ç»§ç»­çˆ†æœã€‚å°±èƒ½åšåˆ°ä»¥ä»»æ„å­—ç¬¦ä½œä¸ºå›æ–‡ä¸²èµ·ç‚¹è¿›è¡Œåˆ†å‰²çš„æ•ˆæœäº†ã€‚**

ä¸€å®šè¦å¥½å¥½ç†è§£ä¸Šé¢é‚£å¥è¯ ~ 

å‰©ä¸‹çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•å¿«é€Ÿåˆ¤æ–­è¿ç»­ä¸€æ®µ `[i, j]` æ˜¯å¦ä¸ºå›æ–‡ä¸²ï¼Œå› ä¸ºçˆ†æœçš„è¿‡ç¨‹æ¯ä¸ªä½ç½®éƒ½å¯ä»¥ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œå¤æ‚åº¦ä¸º $O(2^n)$ çš„ã€‚

å› æ­¤æˆ‘ä»¬ä¸å¯èƒ½æ¯æ¬¡éƒ½ä½¿ç”¨åŒæŒ‡é’ˆå»çº¿æ€§æ‰«æä¸€é `[i, j]` åˆ¤æ–­æ˜¯å¦å›æ–‡ã€‚

ä¸€ä¸ªç›´è§‚çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬å…ˆé¢„å¤„ç†é™¤æ‰€æœ‰çš„ `f[i][j]`ï¼Œ`f[i][j]` ä»£è¡¨ `[i, j]` è¿™ä¸€æ®µæ˜¯å¦ä¸ºå›æ–‡ä¸²ã€‚

é¢„å¤„ç† `f[i][j]` çš„è¿‡ç¨‹å¯ä»¥ç”¨é€’æ¨å»åšã€‚

è¦æƒ³ `f[i][j] == true` ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š

1. `f[i + 1][j - 1] == true`
2. `s[i] == s[j]`

ç”±äºçŠ¶æ€ `f[i][j]` ä¾èµ–äºçŠ¶æ€ `f[i + 1][j - 1]`ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬å·¦ç«¯ç‚¹ `i` æ˜¯**ä»å¤§åˆ°å°**è¿›è¡Œéå†ï¼›è€Œå³ç«¯ç‚¹ `j` æ˜¯**ä»å°åˆ°å¤§**è¿›è¡Œéå†ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬çš„éå†è¿‡ç¨‹å¯ä»¥æ•´ç†ä¸ºï¼š**å³ç«¯ç‚¹ `j` ä¸€ç›´å¾€å³ç§»åŠ¨ï¼ˆä»å°åˆ°å¤§ï¼‰ï¼Œåœ¨ `j` å›ºå®šæƒ…å†µä¸‹ï¼Œå·¦ç«¯ç‚¹ `i` åœ¨ `j` åœ¨å·¦è¾¹å¼€å§‹ï¼Œä¸€ç›´å¾€å·¦ç§»åŠ¨ï¼ˆä»å¤§åˆ°å°ï¼‰**

ä»£ç ï¼š
```java
class Solution {
    public List<List<String>> partition(String s) {
        int n = s.length();
        char[] cs = s.toCharArray();
        // f[i][j] ä»£è¡¨ [i, j] è¿™ä¸€æ®µæ˜¯å¦ä¸ºå›æ–‡ä¸²
        boolean[][] f = new boolean[n][n];
        for (int j = 0; j < n; j++) {
            for (int i = j; i >= 0; i--) {
                // å½“ [i, j] åªæœ‰ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œå¿…ç„¶æ˜¯å›æ–‡ä¸²
                if (i == j) {
                    f[i][j] = true;
                } else {
                    // å½“ [i, j] é•¿åº¦ä¸º 2 æ—¶ï¼Œæ»¡è¶³ cs[i] == cs[j] å³å›æ–‡ä¸²
                    if (j - i + 1 == 2) {
                        f[i][j] = cs[i] == cs[j];

                    // å½“ [i, j] é•¿åº¦å¤§äº 2 æ—¶ï¼Œæ»¡è¶³ (cs[i] == cs[j] && f[i + 1][j - 1]) å³å›æ–‡ä¸²
                    } else {
                        f[i][j] = cs[i] == cs[j] && f[i + 1][j - 1];
                    }
                }
            }
        }
        List<List<String>> ans = new ArrayList<>();
        List<String> cur = new ArrayList<>();
        dfs(s, 0, ans, cur, f);
        return ans;
    }
    /**
     * s: è¦æœç´¢çš„å­—ç¬¦ä¸²
     * u: ä»¥ s ä¸­çš„é‚£ä¸€ä½ä½œä¸ºå›æ–‡ä¸²åˆ†å‰²èµ·ç‚¹
     * ans: æœ€ç»ˆç»“æœé›†
     * cur: å½“å‰ç»“æœé›†
     * f: å¿«é€Ÿåˆ¤æ–­ [i,j] æ˜¯å¦ä¸ºå›æ–‡ä¸²
     */
    void dfs(String s, int u, List<List<String>> ans, List<String> cur, boolean[][] f) {
        int n = s.length();
        if (u == n) ans.add(new ArrayList<>(cur));
        for (int i = u; i < n; i++) {
            if (f[u][i]) {
                cur.add(s.substring(u, i + 1));
                dfs(s, i + 1, ans, cur, f);
                cur.remove(cur.size() - 1);
            }
        }
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šåŠ¨æ€è§„åˆ’é¢„å¤„ç†çš„å¤æ‚åº¦ä¸º $O(n^2)$ï¼›çˆ†æœè¿‡ç¨‹ä¸­æ¯ä¸ªå­—ç¬¦éƒ½å¯ä»¥ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œå¹¶ä¸”æœ‰åˆ†å‰²ä¸ä¸åˆ†å‰²ä¸¤ç§é€‰æ‹©ï¼Œæ–¹æ¡ˆæ•°é‡ä¸º $2^{n - 1}$ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½éœ€è¦å¾€åæ£€æŸ¥å‰©ä½™å­—ç¬¦çš„åˆ†å‰²æƒ…å†µï¼Œå¤æ‚åº¦ä¸º $O(n)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n * 2^n)$
* ç©ºé—´å¤æ‚åº¦ï¼šåŠ¨æ€è§„åˆ’éƒ¨åˆ†çš„å¤æ‚åº¦ä¸º $O(n^2)$ï¼›æ–¹æ¡ˆæ•°é‡æœ€å¤šä¸º $2^{n - 1}$ï¼Œæ¯ä¸ªæ–¹æ¡ˆéƒ½æ˜¯å®Œæ•´å­—ç¬¦ä¸² `s` çš„åˆ†å‰²ï¼Œå¤æ‚åº¦ä¸º $O(n)$ï¼Œæ•´ä½“å¤æ‚åº¦ä¸º $O(n * 2^n)$

***

### æ€»ç»“

å¯¹äºæ­¤ç±»è¦æšä¸¾æ‰€æœ‰æ–¹æ¡ˆçš„é¢˜ç›®ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å…ˆæƒ³åˆ°ã€Œå›æº¯ç®—æ³•ã€ã€‚

ã€Œå›æº¯ç®—æ³•ã€ä»ç®—æ³•å®šä¹‰ä¸Šæ¥è¯´ï¼Œä¸ä¸€å®šè¦ç”¨ DFS å®ç°ï¼Œä½†é€šå¸¸ç»“åˆ DFS æ¥åšï¼Œéš¾åº¦æ˜¯æœ€ä½çš„ã€‚

ã€Œå›æº¯ç®—æ³•ã€æ ¹æ®å½“å‰å†³ç­–æœ‰å¤šå°‘ç§é€‰æ‹©ï¼Œå¯¹åº”äº†ä¸¤å¥—æ¨¡æ¿ã€‚

æ¯ä¸€æ¬¡ç‹¬ç«‹çš„å†³ç­–åªå¯¹åº” é€‰æ‹© å’Œ ä¸é€‰ ä¸¤ç§æƒ…å†µï¼š

1. ç¡®å®šç»“æŸå›æº¯è¿‡ç¨‹çš„ base case

2. éå†æ¯ä¸ªä½ç½®ï¼Œå¯¹æ¯ä¸ªä½ç½®è¿›è¡Œå†³ç­–ï¼ˆåšé€‰æ‹© -> é€’å½’ -> æ’¤é”€é€‰æ‹©ï¼‰

```java
void dfs(å½“å‰ä½ç½®, è·¯å¾„(å½“å‰ç»“æœ), ç»“æœé›†) {
    if (å½“å‰ä½ç½® == ç»“æŸä½ç½®) {
        ç»“æœé›†.add(è·¯å¾„);
        return;
    }
        
    é€‰æ‹©å½“å‰ä½ç½®;    
    dfs(ä¸‹ä¸€ä½ç½®, è·¯å¾„(å½“å‰ç»“æœ), ç»“æœé›†);
    æ’¤é”€é€‰æ‹©å½“å‰ä½ç½®;
    dfs(ä¸‹ä¸€ä½ç½®, è·¯å¾„(å½“å‰ç»“æœ), ç»“æœé›†);
}
```

æ¯ä¸€æ¬¡ç‹¬ç«‹çš„å†³ç­–éƒ½å¯¹åº”äº†å¤šç§é€‰æ‹©ï¼ˆé€šå¸¸å¯¹åº”äº†æ¯æ¬¡å†³ç­–èƒ½é€‰æ‹©ä»€ä¹ˆï¼Œæˆ–è€…æ¯æ¬¡å†³ç­–èƒ½é€‰æ‹©å¤šå°‘ä¸ª ...ï¼‰:

1. ç¡®å®šç»“æŸå›æº¯è¿‡ç¨‹çš„ base case

2. éå†æ‰€æœ‰çš„ã€Œé€‰æ‹©ã€

3. å¯¹é€‰æ‹©è¿›è¡Œå†³ç­– (åšé€‰æ‹© -> é€’å½’ -> æ’¤é”€é€‰æ‹©)

```java
void dfs(é€‰æ‹©åˆ—è¡¨, è·¯å¾„(å½“å‰ç»“æœ), ç»“æœé›†) {
    if (æ»¡è¶³ç»“æŸæ¡ä»¶) {
        ç»“æœé›†.add(è·¯å¾„);
        return;
    }
        
    for (é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
        åšé€‰æ‹©;
        dfs(è·¯å¾„â€™, é€‰æ‹©åˆ—è¡¨, ç»“æœé›†);
        æ’¤é”€é€‰æ‹©;
    }
}
```

***

### æ‹“å±•

åˆšå¥½æœ€è¿‘åœ¨æ›´æ–°ã€Œå›æº¯ç®—æ³•ã€çš„ç›¸å…³é¢˜è§£ï¼Œä»¥ä¸‹é¢˜ç›®å¯ä»¥åŠ æ·±ä½ å¯¹ã€Œå›æº¯ã€ç®—æ³•çš„ç†è§£å’Œæ¨¡æ¿çš„è¿ç”¨ï¼š

[17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ(ä¸­ç­‰)](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/) : [ä»ä¸€é“ã€Œå›æº¯ç®—æ³•ã€ç»å…¸é¢˜ä¸ä½ åˆ†äº«å›æº¯ç®—æ³•çš„åŸºæœ¬å¥—è·¯](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/solution/shua-chuan-lc-dfs-hui-su-jie-fa-by-ac_oi-qa02/)

[39. ç»„åˆæ€»å’Œ(ä¸­ç­‰)](https://leetcode-cn.com/problems/combination-sum/) : [DFS + å›æº¯ç®—æ³•ï¼Œä»¥åŠå¦‚ä½•ç¡®å®šä¸€é“é¢˜æ˜¯å¦åº”è¯¥ä½¿ç”¨ DFS + å›æº¯æ¥æ±‚è§£](https://leetcode-cn.com/problems/combination-sum/solution/dfs-hui-su-suan-fa-yi-ji-ru-he-que-ding-wpbo5/)

[40. ç»„åˆæ€»å’Œ II(ä¸­ç­‰)](https://leetcode-cn.com/problems/combination-sum-ii/) : [ã€å›æº¯ç®—æ³•ã€‘æ±‚ç›®æ ‡å’Œçš„ç»„åˆæ–¹æ¡ˆï¼ˆå‡çº§ç¯‡ï¼‰](https://leetcode-cn.com/problems/combination-sum-ii/solution/hui-su-suan-fa-qiu-mu-biao-he-de-zu-he-f-1iys/)

[216. ç»„åˆæ€»å’Œ III(ä¸­ç­‰)](https://leetcode-cn.com/problems/combination-sum-iii/) : [ã€å›æº¯ç®—æ³•ã€‘å€ŸåŠ©æœ€åä¸€é“ã€Œç»„åˆæ€»å’Œã€é—®é¢˜æ¥æ€»ç»“ä¸€ä¸‹å›æº¯ç®—æ³•](https://leetcode-cn.com/problems/combination-sum-iii/solution/hui-su-suan-fa-jie-zhu-zui-hou-yi-dao-zu-n1lo/)

[37. è§£æ•°ç‹¬(å›°éš¾)](https://leetcode-cn.com/problems/sudoku-solver/) : [ã€æ•°ç‹¬é—®é¢˜ã€‘ç»å…¸é¢è¯•é¢˜ï¼šè§£æ•°ç‹¬](https://leetcode-cn.com/problems/sudoku-solver/solution/he-n-huang-hou-yi-yang-shi-yi-dao-hui-su-lfpd/)


---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.131` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

