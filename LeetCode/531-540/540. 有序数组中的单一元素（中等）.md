### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[540. æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ ](https://leetcode-cn.com/problems/single-element-in-a-sorted-array/solution/gong-shui-san-xie-er-duan-xing-fen-xi-yu-17nv/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒäºŒåˆ†ã€ã€ã€Œå¼‚æˆ–ã€



ç»™ä½ ä¸€ä¸ªä»…ç”±æ•´æ•°ç»„æˆçš„æœ‰åºæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¼šå‡ºç°ä¸¤æ¬¡ï¼Œå”¯æœ‰ä¸€ä¸ªæ•°åªä¼šå‡ºç°ä¸€æ¬¡ã€‚

è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›åªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªæ•°ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³ $O(\log n)$ æ—¶é—´å¤æ‚åº¦å’Œ $O(1)$ ç©ºé—´å¤æ‚åº¦ã€‚

ç¤ºä¾‹ 1:
```
è¾“å…¥: nums = [1,1,2,3,3,4,4,8,8]

è¾“å‡º: 2
```
ç¤ºä¾‹ 2:
```
è¾“å…¥: nums =  [3,3,7,7,10,11,11]

è¾“å‡º: 10
```

æç¤º:
* $1 <= nums.length <= 10^5$
* $0 <= nums[i]Â <= 10^5$

---

### éå†

æ•°æ®èŒƒå›´ä¸º $10^5$ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä»¥ã€Œæ­¥é•¿ä¸º $2$ã€çš„æ–¹å¼è¿›è¡Œä»å‰å¾€åçš„éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸ç¬¦åˆã€Œä¸åä¸€ä¸ªæ•°ç›¸ç­‰ã€æ¡ä»¶çš„å€¼å³æ˜¯ç­”æ¡ˆã€‚

æˆ–æ˜¯åˆ©ç”¨å•ä¸ªå…ƒç´ åªæœ‰ä¸€ä¸ªï¼ˆå…¶ä½™æˆå¯¹å‡ºç°ï¼‰ï¼Œä»å¤´åˆ°å°¾å¼‚æˆ–ä¸€éï¼Œæœ€ç»ˆç»“æœä¸ºå•ä¸€å…ƒç´ å€¼ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int n = nums.length;
        for (int i = 0; i < n - 1; i += 2) {
            if (nums[i] != nums[i + 1]) return nums[i];
        }
        return nums[n - 1];
    }
}
```
Java ä»£ç ï¼š
```Java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int ans = 0;
        for (int i : nums) ans ^= i;
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### äºŒåˆ†

è¿™é“é¢˜çš„ã€ŒäºŒæ®µæ€§ã€åˆ†æéœ€è¦ä¸€ç‚¹ç‚¹ã€Œè„‘ç­‹æ€¥è½¬å¼¯ã€ã€‚

ç”±äºç»™å®šæ•°ç»„æœ‰åº ä¸” å¸¸è§„å…ƒç´ æ€»æ˜¯ä¸¤ä¸¤å‡ºç°ï¼Œ**å› æ­¤å¦‚æœä¸è€ƒè™‘â€œç‰¹æ®Šâ€çš„å•ä¸€å…ƒç´ çš„è¯ï¼Œæˆ‘ä»¬æœ‰ç»“è®ºï¼šæˆå¯¹å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªæ‰€å¯¹åº”çš„ä¸‹æ ‡å¿…ç„¶æ˜¯å¶æ•°ï¼Œæˆå¯¹å…ƒç´ ä¸­çš„ç¬¬äºŒä¸ªæ‰€å¯¹åº”çš„ä¸‹æ ‡å¿…ç„¶æ˜¯å¥‡æ•°ã€‚**

ç„¶åå†è€ƒè™‘å­˜åœ¨å•ä¸€å…ƒç´ çš„æƒ…å†µï¼Œå‡å¦‚å•ä¸€å…ƒç´ æ‰€åœ¨çš„ä¸‹æ ‡ä¸º $x$ï¼Œé‚£ä¹ˆä¸‹æ ‡ $x$ ä¹‹å‰ï¼ˆå·¦è¾¹ï¼‰çš„ä½ç½®ä»æ»¡è¶³ä¸Šè¿°ç»“è®ºï¼Œè€Œä¸‹æ ‡ $x$ ä¹‹åï¼ˆå³è¾¹ï¼‰çš„ä½ç½®ç”±äº $x$ çš„æ’å…¥ï¼Œå¯¼è‡´ç»“è®ºç¿»è½¬ã€‚

å­˜åœ¨è¿™æ ·çš„äºŒæ®µæ€§ï¼ŒæŒ‡å¯¼æˆ‘ä»¬æ ¹æ®å½“å‰äºŒåˆ†ç‚¹ $mid$ çš„å¥‡å¶æ€§è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼š

* $mid$ ä¸ºå¶æ•°ä¸‹æ ‡ï¼šæ ¹æ®ä¸Šè¿°ç»“è®ºï¼Œæ­£å¸¸æƒ…å†µä¸‹å¶æ•°ä¸‹æ ‡çš„å€¼ä¼šä¸ä¸‹ä¸€å€¼ç›¸åŒï¼Œå› æ­¤å¦‚æœæ»¡è¶³è¯¥æ¡ä»¶ï¼Œå¯ä»¥ç¡®ä¿ $mid$ ä¹‹å‰å¹¶æ²¡æœ‰æ’å…¥å•ä¸€å…ƒç´ ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ­¤æ—¶åº”è¯¥æ›´æ–° $l = mid$ï¼Œå¦åˆ™åº”å½“è®© $r = mid - 1$ï¼Œä½†éœ€è¦æ³¨æ„è¿™æ ·çš„æ›´æ–°é€»è¾‘ï¼Œä¼šå› ä¸ºæ›´æ–° $r$ æ—¶å¦å†³ $mid$ è€Œé”™è¿‡ç­”æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦å†³ $mid$ çš„åŠ¨ä½œæ”¾åˆ°æ›´æ–° $l$ çš„ä¸€ä¾§ï¼Œå³éœ€è¦å°†æ›´æ–°é€»è¾‘ä¿®æ”¹ä¸º $l = mid + 1$ å’Œ $r = mid$ ï¼›

* $mid$ ä¸ºå¥‡æ•°ä¸‹æ ‡ï¼šåŒç†ï¼Œæ ¹æ®ä¸Šè¿°ç»“è®ºï¼Œæ­£å¸¸æƒ…å†µä¸‹å¥‡æ•°ä¸‹æ ‡çš„å€¼ä¼šä¸ä¸Šä¸€å€¼ç›¸åŒï¼Œå› æ­¤å¦‚æœæ»¡è¶³è¯¥æ¡ä»¶ï¼Œå¯ä»¥ç¡®ä¿ $mid$ ä¹‹å‰å¹¶æ²¡æœ‰æ’å…¥å•ä¸€å…ƒç´ ï¼Œç›¸åº”çš„æ›´æ–° $l$ å’Œ $r$ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int n = nums.length;
        int l = 0, r = n - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (mid % 2 == 0) {
                if (mid + 1 < n && nums[mid] == nums[mid + 1]) l = mid + 1;
                else r = mid;
            } else {
                if (mid - 1 >= 0 && nums[mid - 1] == nums[mid]) l = mid + 1;
                else r = mid;
            }
        }
        return nums[r];
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int singleNonDuplicate(vector<int>& nums) {
        int n = nums.size();
        int l = 0, r = n - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (mid % 2 == 0) {
                if (mid + 1 < n && nums[mid] == nums[mid + 1]) l = mid + 1;    
                else r = mid;
            } else {
                if (mid - 1 >= 0 && nums[mid - 1] == nums[mid]) l = mid + 1;    
                else r = mid;
            }
        }
        return nums[r];
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def singleNonDuplicate(self, nums: List[int]) -> int:
        n = len(nums)
        l, r = 0, n - 1
        while l < r:
            mid = l + r >> 1
            if mid % 2 == 0:
                if mid + 1 < n and nums[mid] == nums[mid + 1]:
                    l = mid + 1
                else:
                    r = mid
            else:
                if mid - 1 >= 0 and nums[mid - 1] == nums[mid]:
                    l = mid + 1
                else:
                    r = mid
        return nums[r]
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### äºŒåˆ†ï¼ˆå¼‚æˆ–æŠ€å·§ï¼‰

ä¸éš¾å‘ç°ï¼Œä¸Šè¿°è§£æ³•å¯¹å¥‡å¶ä¸‹æ ‡çš„åˆ†æƒ…å†µè®¨è®ºä»…åœ¨äºå½“å‰å€¼ $nums[i]$ æ˜¯ä¸ $nums[i + 1]$ï¼ˆå½“ $i$ ä¸ºå¶æ•°æ—¶ï¼‰è¿˜æ˜¯ $nums[i - 1]$ï¼ˆå½“ $i$ ä¸ºå¥‡æ•°æ—¶ï¼‰è¿›è¡Œæ¯”è¾ƒã€‚

è€Œè¿™æ ·çš„ã€Œè¿ç»­æ®µ å¶å¥‡ ä¸¤ä¸¤æˆå¯¹ã€çš„ç»„åˆï¼Œé€‚åˆä½¿ç”¨ã€Œå¼‚æˆ–ã€æ¥æ‰¾ç›¸åº”çš„æˆç»„å¯¹è±¡ã€‚

å®é™…ä¸Šï¼Œè¯¥æŠ€å·§å¹¿æ³›åœ°åº”ç”¨åœ¨å›¾è®ºå­˜å›¾ä¸­ï¼š**ä½¿ç”¨é‚»æ¥è¡¨ï¼ˆé“¾å¼å‘å‰æ˜Ÿï¼‰å­˜æ— å‘å›¾æ—¶ï¼Œç›´æ¥è®¿é—®ã€Œå½“å‰è¾¹ $e$ã€æ‰€å¯¹åº”çš„ã€Œåå‘è¾¹ $e'$ã€ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ã€Œé“¾å¼å‘å‰æ˜Ÿã€ä¸­æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ã€Œå•é“¾è¡¨ã€å¹¶è®¾å®š $idx$ ä» $0$ å¼€å§‹è¿›è¡Œå­˜å›¾å³å¯ï¼šèƒ½å¤Ÿæ»¡è¶³éå†æ‰€æœ‰å‡ºè¾¹ï¼ŒåŒæ—¶å¦‚æœæœ‰è®¿é—®ç›¸åº”åå‘è¾¹çš„éœ€æ±‚ï¼Œåªéœ€è¦é€šè¿‡ `e[i^1]` è®¿é—®ã€‚**

å¯¹è¿™ç§å­˜å›¾æ–¹å¼ä¸ç†Ÿæ‚‰çš„åŒå­¦ï¼Œå¯ä»¥çœ‹å‰ç½® ğŸ§€ï¼š[æ¶µç›–æ‰€æœ‰çš„ã€Œå­˜å›¾æ–¹å¼ã€ä¸ã€Œæœ€çŸ­è·¯ç®—æ³•ï¼ˆè¯¦å°½æ³¨é‡Šï¼‰ã€](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247488007&idx=1&sn=9d0dcfdf475168d26a5a4bd6fcd3505d&chksm=fd9cb918caeb300e1c8844583db5c5318a89e60d8d552747ff8c2256910d32acd9013c93058f&token=381012359&lang=zh_CN#rd)ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int n = nums.length;
        int l = 0, r = n - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] == nums[mid ^ 1]) l = mid + 1;
            else r = mid;
        }
        return nums[r];
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int singleNonDuplicate(vector<int>& nums) {
        int l = 0, r = nums.size() - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] == nums[mid ^ 1]) l = mid + 1;
            else r = mid;
        }
        return nums[r];
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def singleNonDuplicate(self, nums: List[int]) -> int:
        l, r = 0, len(nums) - 1
        while l < r:
            mid = l + r >> 1
            if nums[mid] == nums[mid ^ 1]:
                l = mid + 1
            else:
                r = mid
        return nums[l]
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.540` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

