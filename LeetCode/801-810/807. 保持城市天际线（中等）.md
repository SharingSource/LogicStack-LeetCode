### 题目描述

这是 LeetCode 上的 **[807. 保持城市天际线](https://leetcode-cn.com/problems/max-increase-to-keep-city-skyline/solution/gong-shui-san-xie-jian-dan-tan-xin-yun-y-2f47/)** ，难度为 **中等**。

Tag : 「贪心」



在二维数组 $grid$ 中，$grid[i][j]$ 代表位于某处的建筑物的高度。 我们被允许增加任何数量（不同建筑物的数量可能不同）的建筑物的高度。 高度 $0$ 也被认为是建筑物。

最后，从新数组的所有四个方向（即顶部，底部，左侧和右侧）观看的“天际线”必须与原始数组的天际线相同。 城市的天际线是从远处观看时，由所有建筑物形成的矩形的外部轮廓。 请看下面的例子。

建筑物高度可以增加的最大总和是多少？

例子：
```
输入： grid = [[3,0,8,4],[2,4,5,7],[9,2,6,3],[0,3,1,0]]

输出： 35

解释： 
The grid is:
[ [3, 0, 8, 4], 
  [2, 4, 5, 7],
  [9, 2, 6, 3],
  [0, 3, 1, 0] ]

从数组竖直方向（即顶部，底部）看“天际线”是：[9, 4, 8, 7]
从水平水平方向（即左侧，右侧）看“天际线”是：[8, 7, 9, 3]

在不影响天际线的情况下对建筑物进行增高后，新数组如下：

gridNew = [ [8, 4, 8, 7],
            [7, 4, 7, 7],
            [9, 4, 8, 7],
            [3, 3, 3, 3] ]
```
说明:
* $1 < grid.length = grid[0].length <= 50。$
* $ grid[i][j]$ 的高度范围是：$[0, 100]$。
* 一座建筑物占据一个$grid[i][j]$：换言之，它们是 $1 x 1 x grid[i][j]$ 的长方体。

---

### 贪心

根据题意，我们需要确保在调整建筑物高度后，从「水平」和「竖直」两个方向所看到的「行」和「列」的最大高度不变。

因此我们可以先通过 $O(n * m)$ 的复杂度预处理出 `grid` 中每行的最大值（使用 $r$ 数组存储），以及每列的最大值（使用 $c$ 数组存储）。

然后在统计答案时，通过判断当前位置 $g[i][j]$ 与 $\min(r[i], c[j])$ 的大小关系来决定当前位置能够增高多少。

可以证明，当每个位置都取得最大的增大高度（局部最优）时，可使得总的增加高度最大（全局最优）。

代码：
```Java
class Solution {
    public int maxIncreaseKeepingSkyline(int[][] grid) {
        int n = grid.length, m = grid[0].length;
        int[] r = new int[n], c = new int[m];
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                r[i] = Math.max(r[i], grid[i][j]);
                c[j] = Math.max(c[j], grid[i][j]);
            }
        }
        int ans = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                ans += Math.min(r[i], c[j]) - grid[i][j];
            }
        }
        return ans;
    }
}
```
* 时间复杂度：$O(n * m)$
* 空间复杂度：$O(n + m)$

---

### 最后

这是我们「刷穿 LeetCode」系列文章的第 `No.807` 篇，系列开始于 2021/01/01，截止于起始日 LeetCode 上共有 1916 道题目，部分是有锁题，我们将先把所有不带锁的题目刷完。

在这个系列文章里面，除了讲解解题思路以外，还会尽可能给出最为简洁的代码。如果涉及通解还会相应的代码模板。

为了方便各位同学能够电脑上进行调试和提交代码，我建立了相关的仓库：https://github.com/SharingSource/LogicStack-LeetCode。

在仓库地址里，你可以看到系列文章的题解链接、系列文章的相应代码、LeetCode 原题链接和其他优选题解。

