### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[911. åœ¨çº¿é€‰ä¸¾](https://leetcode-cn.com/problems/online-election/solution/gong-shui-san-xie-er-fen-yun-yong-ti-by-5y3hi/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒäºŒåˆ†ã€



ç»™ä½ ä¸¤ä¸ªæ•´æ•°æ•°ç»„ $persons$ å’Œ $times$ ã€‚

åœ¨é€‰ä¸¾ä¸­ï¼Œç¬¬Â $i$Â å¼ ç¥¨æ˜¯åœ¨æ—¶åˆ»ä¸ºÂ $times[i]$Â æ—¶æŠ•ç»™å€™é€‰äºº $persons[i]$Â çš„ã€‚

å¯¹äºå‘ç”Ÿåœ¨æ—¶åˆ» $t$ çš„æ¯ä¸ªæŸ¥è¯¢ï¼Œéœ€è¦æ‰¾å‡ºåœ¨Â t æ—¶åˆ»åœ¨é€‰ä¸¾ä¸­é¢†å…ˆçš„å€™é€‰äººçš„ç¼–å·ã€‚

åœ¨Â $t$ æ—¶åˆ»æŠ•å‡ºçš„é€‰ç¥¨ä¹Ÿå°†è¢«è®¡å…¥æˆ‘ä»¬çš„æŸ¥è¯¢ä¹‹ä¸­ã€‚åœ¨å¹³å±€çš„æƒ…å†µä¸‹ï¼Œæœ€è¿‘è·å¾—æŠ•ç¥¨çš„å€™é€‰äººå°†ä¼šè·èƒœã€‚

å®ç° TopVotedCandidate ç±»ï¼š
* `TopVotedCandidate(int[] persons, int[] times)` ä½¿ç”¨Â $persons$ å’Œ $times$ æ•°ç»„åˆå§‹åŒ–å¯¹è±¡ã€‚
* `int q(int t)` æ ¹æ®å‰é¢æè¿°çš„è§„åˆ™ï¼Œè¿”å›åœ¨æ—¶åˆ» $t$ åœ¨é€‰ä¸¾ä¸­é¢†å…ˆçš„å€™é€‰äººçš„ç¼–å·ã€‚

ç¤ºä¾‹ï¼š
```
è¾“å…¥ï¼š
["TopVotedCandidate", "q", "q", "q", "q", "q", "q"]
[[[0, 1, 1, 0, 0, 1, 0], [0, 5, 10, 15, 20, 25, 30]], [3], [12], [25], [15], [24], [8]]

è¾“å‡ºï¼š
[null, 0, 1, 1, 0, 0, 1]

è§£é‡Šï¼š
TopVotedCandidate topVotedCandidate = new TopVotedCandidate([0, 1, 1, 0, 0, 1, 0], [0, 5, 10, 15, 20, 25, 30]);
topVotedCandidate.q(3); // è¿”å› 0 ï¼Œåœ¨æ—¶åˆ» 3 ï¼Œç¥¨æ•°åˆ†å¸ƒä¸º [0] ï¼Œç¼–å·ä¸º 0 çš„å€™é€‰äººé¢†å…ˆã€‚
topVotedCandidate.q(12); // è¿”å› 1 ï¼Œåœ¨æ—¶åˆ» 12 ï¼Œç¥¨æ•°åˆ†å¸ƒä¸º [0,1,1] ï¼Œç¼–å·ä¸º 1 çš„å€™é€‰äººé¢†å…ˆã€‚
topVotedCandidate.q(25); // è¿”å› 1 ï¼Œåœ¨æ—¶åˆ» 25 ï¼Œç¥¨æ•°åˆ†å¸ƒä¸º [0,1,1,0,0,1] ï¼Œç¼–å·ä¸º 1 çš„å€™é€‰äººé¢†å…ˆã€‚ï¼ˆåœ¨å¹³å±€çš„æƒ…å†µä¸‹ï¼Œ1 æ˜¯æœ€è¿‘è·å¾—æŠ•ç¥¨çš„å€™é€‰äººï¼‰ã€‚
topVotedCandidate.q(15); // è¿”å› 0
topVotedCandidate.q(24); // è¿”å› 0
topVotedCandidate.q(8); // è¿”å› 1
```

æç¤ºï¼š
* $1 <= persons.length <= 5000$
* $times.length == persons.length$
* $0 <= persons[i] < persons.length$
* $0 <= times[i] <= 10^9$
* $times$ æ˜¯ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æœ‰åºæ•°ç»„
* $times[0] <= t <= 10^9$
* æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æœ€å¤šè°ƒç”¨ $10^4$ æ¬¡ `q`

---

### äºŒåˆ†

æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬ä¼šåœ¨ $times[i]$ æ—¶åˆ»ä¸º $persons[i]$ å€™é€‰äººå¢åŠ ä¸€ç¥¨ã€‚

**åˆ©ç”¨ $times$ æ•°ç»„ä¸¥æ ¼é€’å¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤„ç† $times$ æ—¶ï¼ˆæ¨¡æ‹ŸåŠ ç¥¨è¿‡ç¨‹ï¼‰ï¼Œä½¿ç”¨ä¸€ä¸ªå˜é‡ $val$ æ¥ç»´æŠ¤å½“å‰å¾—ç¥¨çš„æœ€å¤§æ•°é‡ï¼Œä½¿ç”¨ $list$ æ¥è®°å½•ä¸åŒæ—¶åˆ»ç‚¹çš„å€™é€‰äººäº¤æ›¿æƒ…å†µã€‚**

èµ·å§‹æ—¶ $val = 0$ï¼Œå½“å‡ºç°ç¥¨æ•°å¤§äºç­‰äº $val$ æ—¶ï¼Œæˆ‘ä»¬å¾€ $list$ è¿½åŠ äºŒå…ƒç»„è®°å½• $list[idx] = (times[i], persons[i])$ï¼Œå¹¶æ›´æ–° $val$ã€‚

**æ¯ä¸ª $list[idx]$ ä»£è¡¨äº†å½“å‰å€™é€‰äºº $list[idx][1]$ çš„é¦–æ¬¡å½“é€‰æ—¶åˆ»ä¸º $list[idx][0]$ã€‚**

ä¸¾ä¸ª ğŸŒ°ï¼Œè‹¥ $i = list[idx][0], j = list[idx + 1][0]$ï¼Œåˆ™æ„å‘³ç€åœ¨æ—¶é—´æ®µ $[i, j)$ å†…å½“é€‰çš„å€™é€‰äººä¸º $list[idx][1]$ã€‚

åœ¨æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ã€ŒäºŒåˆ†ã€æ‰¾åˆ° $list$ ä¸­æ»¡è¶³ $list[i][0] <= t$ çš„åˆ†å‰²ç‚¹ $r$ï¼ˆæœ€å¤§ä¸‹æ ‡ï¼‰ï¼Œå– $list[r][1]$ å³æ˜¯ç­”æ¡ˆã€‚

ä»£ç ï¼š
```Java
class TopVotedCandidate {
    List<int[]> list = new ArrayList<>();
    public TopVotedCandidate(int[] persons, int[] times) {
        int val = 0;
        Map<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < times.length; i++) {
            map.put(persons[i], map.getOrDefault(persons[i], 0) + 1);
            if (map.get(persons[i]) >= val) {
                val = map.get(persons[i]);
                list.add(new int[]{times[i], persons[i]});
            }
        }
    }
    public int q(int t) {
        int l = 0, r = list.size() - 1;
        while (l < r) {
            int mid = l + r + 1 >> 1;
            if (list.get(mid)[0] <= t) l = mid;
            else r = mid - 1;
        }
        return list.get(r)[0] <= t ? list.get(r)[1] : 0;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ $n$ ä¸ºæ•°ç»„é•¿åº¦ï¼Œ$m$ ä¸ºæŸ¥è¯¢æ¬¡æ•°ï¼ˆè°ƒç”¨ `q` çš„æ¬¡æ•°ï¼‰ã€‚é¢„å¤„ç†å‡º $list$ çš„å¤æ‚åº¦ä¸º $O(n)$ï¼›æœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸ª $time[i]$ æ—¶åˆ»éƒ½ä¼šäº¤æ›¿äº§ç”Ÿæ–°çš„å€™é€‰äººç¼–å·ï¼Œå³æœ€åæƒ…å†µä¸‹ $list$ çš„æ•°ç»„é•¿åº¦ä¸º $n$ï¼Œæ€»çš„æŸ¥è¯¢å¤æ‚åº¦ä¸º $O(m * \log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.911` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

