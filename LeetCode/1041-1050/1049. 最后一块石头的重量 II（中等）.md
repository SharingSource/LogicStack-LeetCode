### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II](https://leetcode-cn.com/problems/last-stone-weight-ii/solution/gong-shui-san-xie-xiang-jie-wei-he-neng-jgxik/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒåŠ¨æ€è§„åˆ’ã€ã€ã€ŒèƒŒåŒ…é—®é¢˜ã€ã€ã€Œ01 èƒŒåŒ…ã€ã€ã€Œæ•°å­¦ã€




æœ‰ä¸€å †çŸ³å¤´ï¼Œç”¨æ•´æ•°æ•°ç»„Â stones è¡¨ç¤ºã€‚å…¶ä¸­Â stones[i] è¡¨ç¤ºç¬¬ i å—çŸ³å¤´çš„é‡é‡ã€‚

æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡ºä»»æ„ä¸¤å—çŸ³å¤´ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸ºÂ x å’ŒÂ yï¼Œä¸”Â x <= yã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼š
* å¦‚æœÂ x == yï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›
* å¦‚æœÂ x != yï¼Œé‚£ä¹ˆé‡é‡ä¸ºÂ xÂ çš„çŸ³å¤´å°†ä¼šå®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸ºÂ yÂ çš„çŸ³å¤´æ–°é‡é‡ä¸ºÂ y-xã€‚

æœ€åï¼Œæœ€å¤šåªä¼šå‰©ä¸‹ä¸€å— çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´ æœ€å°çš„å¯èƒ½é‡é‡ ã€‚å¦‚æœæ²¡æœ‰çŸ³å¤´å‰©ä¸‹ï¼Œå°±è¿”å› 0ã€‚


ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šstones = [2,7,4,1,8,1]
è¾“å‡ºï¼š1
è§£é‡Šï¼š
ç»„åˆ 2 å’Œ 4ï¼Œå¾—åˆ° 2ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,7,1,8,1]ï¼Œ
ç»„åˆ 7 å’Œ 8ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,1,1,1]ï¼Œ
ç»„åˆ 2 å’Œ 1ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1,1,1]ï¼Œ
ç»„åˆ 1 å’Œ 1ï¼Œå¾—åˆ° 0ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1]ï¼Œè¿™å°±æ˜¯æœ€ä¼˜å€¼ã€‚
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šstones = [31,26,33,21,40]
è¾“å‡ºï¼š5
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šstones = [1,2]
è¾“å‡ºï¼š1
```

æç¤ºï¼š
* 1 <= stones.length <= 30
* 1 <= stones[i] <= 100

---

### åŸºæœ¬åˆ†æ

çœ‹åˆ°æ ‡é¢˜ï¼Œå¿ƒé‡Œå’¯å™”äº†ä¸€ä¸‹ ğŸ¤£

ä¸€èˆ¬æ€§çš„çŸ³å­åˆå¹¶é—®é¢˜é€šå¸¸æ˜¯åªèƒ½æ“ä½œç›¸é‚»çš„ä¸¤ä¸ªçŸ³å­ï¼Œè¦ä¹ˆæ˜¯ã€ŒåŒºé—´ DPã€è¦ä¹ˆæ˜¯ã€Œå››è¾¹å½¢ä¸ç­‰å¼ã€ï¼Œæ€ä¹ˆåˆ° LeetCode å°±æˆäº†ä¸­ç­‰éš¾åº¦çš„é¢˜ç›®ï¼ˆä¹Ÿå¤ªå·äº† ğŸ¤£

ä»”ç»†çœ‹äº†ä¸€ä¸‹é¢˜ç›®ï¼Œå¯å¯¹ä»»æ„çŸ³å­è¿›è¡Œæ“ä½œï¼Œé‡æ”¾å›çš„é‡é‡ä¹Ÿä¸æ˜¯æ“ä½œçŸ³å­çš„æ€»å’Œï¼Œè€Œæ˜¯æ“ä½œçŸ³å­çš„å·®å€¼ã€‚

å“¦ï¼Œé‚£æ²¡äº‹äº† ~ ğŸ¤£

ä¹Ÿæ˜¯åŸºäºæ­¤å¯å‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è¿›è¡Œåˆ†æã€‚

å‡è®¾æƒ³è¦å¾—åˆ°æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§å¦‚ä¸‹é¡ºåºæ“ä½œçŸ³å­ï¼š$[(sa, sb), (sc, sd), ... ,(si, sj), (sp, sq)]$ã€‚

å…¶ä¸­ $abcdijpq$ ä»£è¡¨äº†çŸ³å­ç¼–å·ï¼Œ**å­—æ¯é¡ºåºä¸ä»£è¡¨ç¼–å·çš„å¤§å°å…³ç³»**ã€‚

**å¦‚æœä¸è€ƒè™‘ã€Œæœ‰æ”¾å›ã€çš„æ“ä½œçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªçŸ³å­å †ï¼ˆæ­£å·å †/è´Ÿå·å †ï¼‰ï¼š**

* **å°†æ¯æ¬¡æ“ä½œä¸­ã€Œé‡é‡è¾ƒå¤§ã€çš„çŸ³å­æ”¾åˆ°ã€Œæ­£å·å †ã€ï¼Œä»£è¡¨åœ¨è¿™æ¬¡æ“ä½œä¸­è¯¥çŸ³å­é‡é‡åœ¨ã€Œæœ€ç»ˆè¿ç®—ç»“æœã€ä¸­åº”ç”¨ $+$ è¿ç®—ç¬¦**
* **å°†æ¯æ¬¡æ“ä½œä¸­ã€Œé‡é‡è¾ƒå°‘/ç›¸ç­‰ã€çš„çŸ³å­æ”¾åˆ°ã€Œè´Ÿå·å †ã€ï¼Œä»£è¡¨åœ¨è¿™æ¬¡æ“ä½œä¸­è¯¥çŸ³å­é‡é‡åœ¨ã€Œæœ€ç»ˆè¿ç®—ç»“æœã€ä¸­åº”ç”¨ $-$ è¿ç®—ç¬¦**

**è¿™æ„å‘³æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„ç»“æœï¼Œå¯ä»¥ä¸ºåŸæ¥ $stones$ æ•°ç»„ä¸­çš„æ•°å­—æ·»åŠ  $+/-$ ç¬¦å·ï¼Œæ‰€å½¢æˆçš„ã€Œè®¡ç®—è¡¨è¾¾å¼ã€æ‰€è¡¨ç¤ºã€‚**

é‚£æœ‰æ”¾å›çš„çŸ³å­é‡é‡å¦‚ä½•è€ƒè™‘ï¼Ÿ

**å…¶å®æ‰€è°“çš„ã€Œæœ‰æ”¾å›ã€æ“ä½œï¼Œåªæ˜¯è§¦å‘è°ƒæ•´ã€ŒæŸä¸ªåŸæœ‰çŸ³å­ã€æ‰€åœ¨ã€Œå“ªä¸ªå †ã€ä¸­ï¼Œå¹¶ä¸ä¼šçœŸæ­£æ„ä¹‰ä¸Šçš„äº§ç”Ÿã€Œæ–°çš„çŸ³å­é‡é‡ã€ã€‚**

ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

å‡è®¾æœ‰èµ·å§‹çŸ³å­ $a$ å’Œ $b$ï¼Œä¸”ä¸¤è€…é‡é‡å…³ç³»ä¸º $a \geq b$ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šå°† $a$ æ”¾å…¥ã€Œæ­£å·å †ã€ï¼Œå°† $b$ æ”¾å…¥ã€Œè´Ÿå·å †ã€ã€‚é‡æ”¾å›æ“ä½œå¯ä»¥çœ‹ä½œäº§ç”Ÿä¸€ä¸ªæ–°çš„é‡é‡ä¸º $a - b$ çš„â€œè™šæ‹ŸçŸ³å­â€ï¼Œå°†æ¥è¿™ä¸ªâ€œè™šæ‹ŸçŸ³å­â€ä¹Ÿä¼šå‚ä¸æŸæ¬¡åˆå¹¶æ“ä½œï¼Œä¹Ÿä¼šè¢«æ·»åŠ  $+/-$ ç¬¦å·ï¼š

* å½“å¯¹â€œè™šæ‹ŸçŸ³å­â€æ·»åŠ  $+$ ç¬¦å·ï¼Œå³å¯ $+(a - b)$ï¼Œå±•å¼€åä¸º $a - b$ï¼Œå³èµ·å§‹çŸ³å­ $a$ å’Œ $b$ æ‰€åœ¨ã€ŒçŸ³å­å †ã€ä¸å˜
* å½“å¯¹â€œè™šæ‹ŸçŸ³å­â€æ·»åŠ  $-$ ç¬¦å·ï¼Œå³å¯ $-(a - b)$ï¼Œå±•å¼€åä¸º $b - a$ï¼Œå³èµ·å§‹çŸ³å­ $a$ å’Œ $b$ æ‰€åœ¨ã€ŒçŸ³å­å †ã€äº¤æ¢

**å› æ­¤æ‰€è°“ä¸æ–­ã€Œåˆå¹¶ã€&ã€Œé‡æ”¾ã€ï¼Œæœ¬è´¨åªæ˜¯åœ¨æ„é€ ä¸€ä¸ªæŠ˜å çš„è®¡ç®—è¡¨è¾¾å¼ï¼Œæœ€ç»ˆéƒ½èƒ½å±•å¼€æ‰å¹³åŒ–ä¸ºéæŠ˜å çš„è®¡ç®—è¡¨è¾¾å¼ã€‚**

**ç»¼ä¸Šï¼Œå³ä½¿æ˜¯åŒ…å«ã€Œæœ‰æ”¾å›ã€æ“ä½œï¼Œæœ€ç»ˆçš„ç»“æœä»ç„¶å¯ä»¥ä½¿ç”¨ã€Œä¸ºåŸæ¥ $stones$ æ•°ç»„ä¸­çš„æ•°å­—æ·»åŠ  $+/-$ ç¬¦å·ï¼Œå½¢æˆçš„â€œè®¡ç®—è¡¨è¾¾å¼â€ã€æ‰€è¡¨ç¤ºã€‚**

---

### åŠ¨æ€è§„åˆ’

æœ‰äº†ä¸Šè¿°åˆ†æåï¼Œé—®é¢˜è½¬æ¢ä¸ºï¼š**ä¸º $stones$ ä¸­çš„æ¯ä¸ªæ•°å­—æ·»åŠ  $+/-$ï¼Œä½¿å¾—å½¢æˆçš„ã€Œè®¡ç®—è¡¨è¾¾å¼ã€ç»“æœç»å¯¹å€¼æœ€å°ã€‚**

ä¸[ï¼ˆé¢˜è§£ï¼‰494. ç›®æ ‡å’Œ](https://leetcode-cn.com/problems/target-sum/solution/gong-shui-san-xie-yi-ti-si-jie-dfs-ji-yi-et5b/) ç±»ä¼¼ï¼Œéœ€è¦è€ƒè™‘æ­£è´Ÿå·ä¸¤è¾¹æ—¶ï¼Œå…¶å®åªéœ€è¦è€ƒè™‘ä¸€è¾¹å°±å¯ä»¥äº†ï¼Œä½¿ç”¨æ€»å’Œ $sum$ å‡å»å†³ç­–å‡ºæ¥çš„ç»“æœï¼Œå°±èƒ½å¾—åˆ°å¦å¤–ä¸€è¾¹çš„ç»“æœã€‚

åŒæ—¶ï¼Œç”±äºæƒ³è¦ã€Œè®¡ç®—è¡¨è¾¾å¼ã€ç»“æœç»å¯¹å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†çŸ³å­åˆ’åˆ†ä¸ºå·®å€¼æœ€å°çš„ä¸¤ä¸ªå †ã€‚

å…¶å®å°±æ˜¯å¯¹ã€Œè®¡ç®—è¡¨è¾¾å¼ã€ä¸­å¸¦ $-$ çš„æ•°å€¼æå–å…¬å› æ•° $-1$ï¼Œè¿›ä¸€æ­¥è½¬æ¢ä¸ºä¸¤å †çŸ³å­ç›¸å‡æ€»å’Œï¼Œç»å¯¹å€¼æœ€å°ã€‚

è¿™å°±å°†é—®é¢˜å½»åº•åˆ‡æ¢ä¸º 01 èƒŒåŒ…é—®é¢˜ï¼š**ä» $stones$ æ•°ç»„ä¸­é€‰æ‹©ï¼Œå‡‘æˆæ€»å’Œä¸è¶…è¿‡ $\frac{sum}{2}$ çš„æœ€å¤§ä»·å€¼ã€‚**

å…¶ä¸­ã€Œæˆæœ¬ã€&ã€Œä»·å€¼ã€å‡ä¸ºæ•°å€¼æœ¬èº«ã€‚

æ•´ç†ä¸€ä¸‹ï¼š

å®šä¹‰ $f[i][j]$ ä»£è¡¨è€ƒè™‘å‰ $i$ ä¸ªç‰©å“ï¼ˆæ•°å€¼ï¼‰ï¼Œå‡‘æˆæ€»å’Œä¸è¶…è¿‡ $j$ çš„æœ€å¤§ä»·å€¼ã€‚

æ¯ä¸ªç‰©å“éƒ½æœ‰ã€Œé€‰ã€å’Œã€Œä¸é€‰ã€ä¸¤ç§å†³ç­–ï¼Œè½¬ç§»æ–¹ç¨‹ä¸ºï¼š

$$f[i][j] = \max(f[i - 1][j], f[i - 1][j - stones[i - 1]] + stones[i - 1])$$

ä¸å®Œå…¨èƒŒåŒ…ä¸åŒï¼Œ01 èƒŒåŒ…çš„å‡ ç§ç©ºé—´ä¼˜åŒ–æ˜¯ä¸å­˜åœ¨æ—¶é—´å¤æ‚åº¦ä¸Šçš„ä¼˜åŒ–ï¼Œå› æ­¤å†™æˆ æœ´ç´ äºŒç»´ã€æ»šåŠ¨æ•°ç»„ã€ä¸€ç»´ä¼˜åŒ– éƒ½å¯ä»¥ã€‚

å»ºè®®ç›´æ¥ä¸Šæ‰‹å†™ã€Œä¸€ç»´ç©ºé—´ä¼˜åŒ–ã€ç‰ˆæœ¬ï¼Œæ˜¯å…¶ä»–èƒŒåŒ…é—®é¢˜çš„åŸºç¡€ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int lastStoneWeightII(int[] ss) {
        int n = ss.length;
        int sum = 0;
        for (int i : ss) sum += i;
        int t = sum / 2;
        int[][] f = new int[n + 1][t + 1];
        for (int i = 1; i <= n; i++) {
            int x = ss[i - 1];
            for (int j = 0; j <= t; j++) {
                f[i][j] = f[i - 1][j];
                if (j >= x) f[i][j] = Math.max(f[i][j], f[i - 1][j - x] + x);
            }
        }
        return Math.abs(sum - f[n][t] - f[n][t]);
    }
}
```
```Java []
class Solution {
    public int lastStoneWeightII(int[] ss) {
        int n = ss.length;
        int sum = 0;
        for (int i : ss) sum += i;
        int t = sum / 2;
        int[][] f = new int[2][t + 1];
        for (int i = 1; i <= n; i++) {
            int x = ss[i - 1];
            int a = i & 1, b = (i - 1) & 1;
            for (int j = 0; j <= t; j++) {
                f[a][j] = f[b][j];
                if (j >= x) f[a][j] = Math.max(f[a][j], f[b][j - x] + x);
            }
        }
        return Math.abs(sum - f[n&1][t] - f[n&1][t]);
    }
}
```
```Java []
class Solution {
    public int lastStoneWeightII(int[] ss) {
        int n = ss.length;
        int sum = 0;
        for (int i : ss) sum += i;
        int t = sum / 2;
        int[] f = new int[t + 1];
        for (int i = 1; i <= n; i++) {
            int x = ss[i - 1];
            for (int j = t; j >= x; j--) {
                f[j] = Math.max(f[j], f[j - x] + x);
            }
        }
        return Math.abs(sum - f[t] - f[t]);
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n * \sum_{i = 0}^{n - 1} stones[i])$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n * \sum_{i = 0}^{n - 1} stones[i])$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.1049` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆå°†æ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

