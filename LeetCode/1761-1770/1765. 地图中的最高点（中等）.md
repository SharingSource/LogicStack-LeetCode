### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[1765. åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹](https://leetcode-cn.com/problems/map-of-highest-peak/solution/gong-shui-san-xie-duo-yuan-bfs-yun-yong-8sw0f/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå›¾è®ºæœç´¢ã€ã€ã€Œå¤šæº BFSã€



ç»™ä½ ä¸€ä¸ªå¤§å°ä¸ºÂ `m x n`Â çš„æ•´æ•°çŸ©é˜µÂ `isWater`Â ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªç”±é™†åœ°å’Œæ°´åŸŸå•å…ƒæ ¼ç»„æˆçš„åœ°å›¾ã€‚

* å¦‚æœÂ `isWater[i][j] = 0`Â ï¼Œæ ¼å­Â `(i, j)`Â æ˜¯ä¸€ä¸ªé™†åœ°æ ¼å­ã€‚
* å¦‚æœÂ `isWater[i][j] = 1`Â ï¼Œæ ¼å­Â `(i, j)`Â æ˜¯ä¸€ä¸ªæ°´åŸŸæ ¼å­ã€‚

ä½ éœ€è¦æŒ‰ç…§å¦‚ä¸‹è§„åˆ™ç»™æ¯ä¸ªå•å…ƒæ ¼å®‰æ’é«˜åº¦ï¼š

* æ¯ä¸ªæ ¼å­çš„é«˜åº¦éƒ½å¿…é¡»æ˜¯éè´Ÿçš„ã€‚
* å¦‚æœä¸€ä¸ªæ ¼å­æ˜¯æ°´åŸŸï¼Œé‚£ä¹ˆå®ƒçš„é«˜åº¦å¿…é¡»ä¸º $0$Â ã€‚
* ä»»æ„ç›¸é‚»çš„æ ¼å­é«˜åº¦å·® è‡³å¤šÂ ä¸º `1`Â ã€‚å½“ä¸¤ä¸ªæ ¼å­åœ¨æ­£ä¸œã€å—ã€è¥¿ã€åŒ—æ–¹å‘ä¸Šç›¸äº’ç´§æŒ¨ç€ï¼Œå°±ç§°å®ƒä»¬ä¸ºç›¸é‚»çš„æ ¼å­ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æœ‰ä¸€æ¡å…¬å…±è¾¹ï¼‰

æ‰¾åˆ°ä¸€ç§å®‰æ’é«˜åº¦çš„æ–¹æ¡ˆï¼Œä½¿å¾—çŸ©é˜µä¸­çš„æœ€é«˜é«˜åº¦å€¼Â æœ€å¤§Â ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªå¤§å°ä¸ºÂ `m x n`Â çš„æ•´æ•°çŸ©é˜µ `height`Â ï¼Œå…¶ä¸­ `height[i][j]`Â æ˜¯æ ¼å­ `(i, j)`Â çš„é«˜åº¦ã€‚å¦‚æœæœ‰å¤šç§è§£æ³•ï¼Œè¯·è¿”å›Â ä»»æ„ä¸€ä¸ªÂ ã€‚

ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode.com/uploads/2021/01/10/screenshot-2021-01-11-at-82045-am.png)

```
è¾“å…¥ï¼šisWater = [[0,1],[0,0]]

è¾“å‡ºï¼š[[1,0],[2,1]]

è§£é‡Šï¼šä¸Šå›¾å±•ç¤ºäº†ç»™å„ä¸ªæ ¼å­å®‰æ’çš„é«˜åº¦ã€‚
è“è‰²æ ¼å­æ˜¯æ°´åŸŸæ ¼ï¼Œç»¿è‰²æ ¼å­æ˜¯é™†åœ°æ ¼ã€‚
```
ç¤ºä¾‹ 2ï¼š

![](https://assets.leetcode.com/uploads/2021/01/10/screenshot-2021-01-11-at-82050-am.png)

```
è¾“å…¥ï¼šisWater = [[0,0,1],[1,0,0],[0,0,0]]

è¾“å‡ºï¼š[[1,1,0],[0,1,1],[1,2,2]]

è§£é‡Šï¼šæ‰€æœ‰å®‰æ’æ–¹æ¡ˆä¸­ï¼Œæœ€é«˜å¯è¡Œé«˜åº¦ä¸º 2 ã€‚
ä»»æ„å®‰æ’æ–¹æ¡ˆä¸­ï¼Œåªè¦æœ€é«˜é«˜åº¦ä¸º 2 ä¸”ç¬¦åˆä¸Šè¿°è§„åˆ™çš„ï¼Œéƒ½ä¸ºå¯è¡Œæ–¹æ¡ˆã€‚
```

æç¤ºï¼š
* $m = isWater.length$
* $n = isWater[i].length$
* $1 <= m, n <= 1000$
* `isWater[i][j]`Â è¦ä¹ˆæ˜¯Â $0$Â ï¼Œè¦ä¹ˆæ˜¯Â $1$Â ã€‚
* è‡³å°‘æœ‰ $1$Â ä¸ªæ°´åŸŸæ ¼å­ã€‚

---

### å¤šæº BFS

è¿™æ˜¯ä¸€é“ã€Œå¤šæº `BFS`ã€æ¿å­é¢˜ï¼Œå¯¹ã€Œå¤šæº `BFS`ã€ä¸ç†Ÿæ‚‰çš„åŒå­¦ï¼Œå¯ä»¥çœ‹çœ‹å‰ç½® ğŸ§€ï¼š[å¤šæº BFS å…¥é—¨](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487179&idx=1&sn=e30a662c03fba3861254dbcf3fb9d6f2&chksm=fd9ca5d4caeb2cc205804fd17a2ce86b25d0408adc3417e73154f59d37e7cb17e02374f5122c&scene=178&cur_album_id=1917113998693449732#rd)ã€‚

é‡Œé¢è¯¦è§£äº†ã€Œå¤šæº `BFS`ã€ä¸ã€Œå•æº `BFS`ã€æ¿å­ä¸Šçš„åŒºåˆ«ï¼Œå¼ºè°ƒäº†å¯ä»¥é€šè¿‡å»ºç«‹ã€Œè™šæ‹Ÿæºç‚¹ã€çš„æ–¹å¼ï¼Œå°†ã€Œå¤šæº `BFS`ã€è½¬æ¢å›ã€Œå•æº `BFS`ã€é—®é¢˜ã€‚

å›åˆ°æœ¬é¢˜ï¼Œé¢˜ç›®è§„å®šäº†æ°´åŸŸåŒºåŸŸçš„é«˜åº¦ä¸º $0$ï¼Œç„¶åç›¸é‚»æ ¼å­ä¹‹é—´çš„é«˜åº¦å·®è‡³å¤šä¸º $1$ï¼Œ

æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰æ°´åŸŸï¼ˆé«˜åº¦ä¸º $0$ï¼‰åŒºåŸŸè¿›è¡Œå…¥é˜Ÿï¼Œç„¶åè·‘ä¸€é `BFS` å³å¯ã€‚

å°†æ‰€æœ‰æ°´åŸŸï¼ˆé«˜åº¦ä¸º $0$ï¼‰åŒºåŸŸè¿›è¡Œå…¥é˜Ÿçš„æ“ä½œå¯çœ‹ä½œæ˜¯å°†ä¸ã€Œè™šæ‹Ÿæºç‚¹ã€é“¾æ¥çš„èŠ‚ç‚¹è¿›è¡Œå…¥é˜Ÿï¼ˆä¹Ÿç­‰ä»·äºèµ·å§‹åªå°†è™šæ‹Ÿæºç‚¹å…¥é˜Ÿï¼‰ï¼š

![](https://pic.leetcode-cn.com/1643414942-ajXGBO-image.png)

å®¹æ˜“è¯æ˜è¿™æ ·åšæ³•çš„æ­£ç¡®æ€§ï¼š**å¯¹äºä¸€ä¸ªã€Œé™†åœ°ã€åŒºåŸŸï¼ˆé«˜åº¦å¯å˜ï¼‰è€Œè¨€ï¼Œå…¶æ‰€èƒ½å¡«å…¥çš„é«˜åº¦ï¼Œå–å†³äºå…¶è·ç¦»å…¶ä»–ã€Œæ°´åŸŸã€åŒºåŸŸçš„è·ç¦»ï¼Œè€Œæˆ‘ä»¬æœ€ç»ˆè¦è®©æ•´ä¸ªç­”æ¡ˆçŸ©é˜µåˆæ³•ï¼Œå› æ­¤æ¯ä¸ªã€Œé™†åœ°ã€åŒºåŸŸåº”è¯¥å–å…¶æ‰€èƒ½å¡«å…¥çš„é«˜åº¦çš„ã€Œä¸‹ç•Œã€ï¼Œå³åªç”±ã€Œè·ç¦»å®ƒæœ€è¿‘çš„æ°´åŸŸã€åŒºåŸŸæ‰€æ›´æ–°ï¼Œè¿™ç¬¦åˆ `BFS`  çš„æ€§è´¨ã€‚**

Java ä»£ç ï¼š
```Java
class Solution {
    public int[][] highestPeak(int[][] g) {
        int m = g.length, n = g[0].length;
        int[][] ans = new int[m][n];
        Deque<int[]> d = new ArrayDeque<>();
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (g[i][j] == 1) d.addLast(new int[]{i, j});
                ans[i][j] = g[i][j] == 1 ? 0 : -1;
            }
        }
        int[][] dirs = new int[][]{{1,0},{-1,0},{0,1},{0,-1}};
        while (!d.isEmpty()) {
            int[] info = d.pollFirst();
            int x = info[0], y = info[1];
            for (int[] di : dirs) {
                int nx = x + di[0], ny = y + di[1];
                if (nx < 0 || nx >= m || ny < 0 || ny >= n) continue;
                if (ans[nx][ny] != -1) continue;
                ans[nx][ny] = ans[x][y] + 1;
                d.addLast(new int[]{nx, ny});
            }
        }
        return ans;
    }
}
```
C++ ä»£ç ï¼š
```C++
const int dx[] = {-1, 1, 0, 0}, dy[] = {0, 0, -1, 1};
class Solution {
public:
    vector<vector<int>> highestPeak(vector<vector<int>>& g) {
        int m = g.size(), n = g[0].size();
        queue<pair<int, int>> q;
        vector<vector<int>> ans(m, vector<int>(n, 0));
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (g[i][j] == 1) q.emplace(i, j);    
                else ans[i][j] = -1;
            }
        }
        while (!q.empty()) {
            auto [x, y] = q.front(); q.pop();
            for (int i = 0; i < 4; i++) {
                int nx = x + dx[i], ny = y + dy[i];
                if (nx < 0 || nx >= m || ny < 0 || ny >= n) continue;
                if (ans[nx][ny] != -1) continue;
                ans[nx][ny] = ans[x][y] + 1;
                q.emplace(nx, ny);
            }
        }
        return ans;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def highestPeak(self, g: List[List[int]]) -> List[List[int]]:
        m, n = len(g), len(g[0])
        ans = [[0] * n for _ in range(m)]
        q = deque()
        for i in range(m):
            for j in range(n):
                if g[i][j]:
                    q.append((i, j))
                else:
                    ans[i][j] = -1

        dirs = [(1, 0), (-1, 0), (0, 1), (0, -1)]
        while q:
            x, y = q.popleft()
            for di in dirs:
                nx, ny = x + di[0], y + di[1]
                if nx < 0 or nx >= m or ny < 0 or ny >= n:
                    continue
                if ans[nx][ny] != -1:
                    continue
                ans[nx][ny] = ans[x][y] + 1
                q.append((nx, ny))
        return ans
```
GO ä»£ç ï¼š
```Go
func highestPeak(isWater [][]int) [][]int {
    m, n := len(isWater), len(isWater[0])
    ans, d := make([][]int, m), [][]int{}
    for i := 0; i < m; i++ {
        ans[i] = make([]int, n)
        for j := 0; j < n; j++ {
            if isWater[i][j] == 1 {
                d = append(d, []int{i, j})
                ans[i][j] = 0
            } else {
                ans[i][j] = -1
            }
        }
    }
    dirs := [][]int{{1,0}, {-1,0}, {0,1}, {0,-1}}
    for h := 1; len(d) > 0; h++ {
        for size := len(d); size > 0; size--{
            info := d[0]
            d = d[1:]
            x, y := info[0], info[1]
            for _, di := range dirs {
                nx, ny := x + di[0], y + di[1]
                if nx >= 0 && nx < m && ny >= 0 && ny < n && ans[nx][ny] == -1 {
                    ans[nx][ny] = h
                    d = append(d, []int{nx, ny})
                }
            }
        }
    }
    return ans
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(m \times n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m \times n)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.1765` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

