### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[1668. æœ€å¤§é‡å¤å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/maximum-repeating-substring/solution/by-ac_oier-xjhn/)** ï¼Œéš¾åº¦ä¸º **ç®€å•**ã€‚

Tag : ã€ŒåŠ¨æ€è§„åˆ’ã€ã€ã€Œåºåˆ— DPã€ã€ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€



ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â `sequence`ï¼Œå¦‚æœå­—ç¬¦ä¸² `word`Â è¿ç»­é‡å¤Â `k`Â æ¬¡å½¢æˆçš„å­—ç¬¦ä¸²æ˜¯Â `sequence`Â çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå•è¯Â `word` çš„ é‡å¤å€¼ä¸º `k` ã€‚

å•è¯ `word`Â çš„ æœ€å¤§é‡å¤å€¼Â æ˜¯å•è¯Â `word`Â åœ¨Â `sequence`Â ä¸­æœ€å¤§çš„é‡å¤å€¼ã€‚å¦‚æœÂ `word`Â ä¸æ˜¯Â `sequence`Â çš„å­ä¸²ï¼Œé‚£ä¹ˆé‡å¤å€¼Â `k`Â ä¸º `0` ã€‚

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `sequence`Â å’Œ `word`Â ï¼Œè¯·ä½ è¿”å› æœ€å¤§é‡å¤å€¼Â `k` ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šsequence = "ababc", word = "ab"

è¾“å‡ºï¼š2

è§£é‡Šï¼š"abab" æ˜¯ "ababc" çš„å­å­—ç¬¦ä¸²ã€‚
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šsequence = "ababc", word = "ba"

è¾“å‡ºï¼š1

è§£é‡Šï¼š"ba" æ˜¯ "ababc" çš„å­å­—ç¬¦ä¸²ï¼Œä½† "baba" ä¸æ˜¯ "ababc" çš„å­å­—ç¬¦ä¸²ã€‚
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šsequence = "ababc", word = "ac"

è¾“å‡ºï¼š0

è§£é‡Šï¼š"ac" ä¸æ˜¯ "ababc" çš„å­å­—ç¬¦ä¸²ã€‚
```

æç¤ºï¼š
* $1 <= sequence.length <= 100$
* $1 <= word.length <= 100$
* `sequence` å’ŒÂ `word`Â éƒ½åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚

---

### åºåˆ— DP

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬è®° `sequence` ä¸º `ss`ï¼Œè®° `word` ä¸º `pp`ï¼Œå°†ä¸¤è€…é•¿åº¦åˆ†åˆ«è®°ä¸º `n` å’Œ `m`ã€‚

åŒæ—¶æˆ‘ä»¬è°ƒæ•´ã€Œå­—ç¬¦ä¸²ã€ä»¥åŠã€Œå°†è¦ç”¨åˆ°çš„åŠ¨è§„æ•°ç»„ã€çš„ä¸‹æ ‡ä» $1$ å¼€å§‹ã€‚

è¿™æ˜¯ä¸€é“å…¥é—¨çº§çš„ã€Œåºåˆ— DPã€è¿ç”¨é¢˜ï¼Œå®¹æ˜“æƒ³åˆ° **å®šä¹‰ $f[i]$ ä¸ºäº†è€ƒè™‘ä»¥ `ss[i]` ç»“å°¾æ—¶çš„æœ€å¤§é‡å¤å€¼**ã€‚

ä¸å¤±ä¸€èˆ¬æ€§è€ƒè™‘ $f[i]$ è¯¥å¦‚ä½•è½¬ç§»ï¼šç”±äº `pp` çš„é•¿åº¦å·²çŸ¥ï¼Œæ¯æ¬¡è½¬ç§» $f[i]$ æ—¶æˆ‘ä»¬å¯ä»¥ä» `ss` ä¸­æˆªå– **ä»¥ $ss[i]$ ä¸ºç»“å°¾ï¼Œé•¿åº¦ä¸º $m$ çš„åç¼€å­—ç¬¦ä¸²** `sub` å¹¶ä¸ `pp` åŒ¹é…ï¼Œè‹¥ä¸¤è€…ç›¸ç­‰ï¼Œè¯´æ˜ `sub` è´¡çŒ®äº†å¤§å°ä¸º $1$ çš„é‡å¤åº¦ï¼ŒåŒæ—¶è¯¥é‡å¤åº¦å¯ç´¯åŠ åœ¨ $f[i - m]$ ä¸Šï¼ˆå¥½å¥½å›æƒ³æˆ‘ä»¬çš„çŠ¶æ€å®šä¹‰ï¼‰ï¼Œå³æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$f[i] = f[i - m] + 1$ã€‚

æœ€ç»ˆæ‰€æœ‰ $f[i]$ çš„æœ€å¤§å€¼å³ä¸ºç­”æ¡ˆã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int maxRepeating(String ss, String pp) {
        int n = ss.length(), m = pp.length(), ans = 0;
        int[] f = new int[n + 10];
        for (int i = 1; i <= n; i++) {
            if (i - m < 0) continue;
            if (ss.substring(i - m, i).equals(pp)) f[i] = f[i - m] + 1;
            ans = Math.max(ans, f[i]);
        }
        return ans;
    }
}
```
TypeScript ä»£ç ï¼š
```TypeScript
function maxRepeating(ss: string, pp: string): number {
    let n = ss.length, m = pp.length, ans = 0
    const f = new Array<number>(n + 10).fill(0)
    for (let i = 1; i <= n; i++) {
        if (i - m < 0) continue
        if (ss.substr(i - m, i) == pp) f[i] = f[i - m] + 1
        ans = Math.max(ans, f[i])
    }
    return ans
}
```
Python ä»£ç ï¼š
```Python
class Solution:
    def maxRepeating(self, ss: str, pp: str) -> int:
        n, m, ans = len(ss), len(pp), 0
        f = [0] * (n + 10)
        for i in range(1, n + 1):
            if i - m < 0:
                continue
            if ss[i - m:i] == pp:
                f[i] = f[i - m] + 1
            ans = max(ans, f[i])
        return ans
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n \times m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### å­—ç¬¦ä¸²å“ˆå¸Œ

è§£æ³•ä¸€çš„è½¬ç§»ç“¶é¢ˆåœ¨äºï¼šæ¯æ¬¡éœ€è¦èŠ±è´¹ $O(m)$ çš„å¤æ‚åº¦æ¥ç”Ÿæˆå­ä¸²ï¼Œå¹¶è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒã€‚

è¯¥è¿‡ç¨‹å¯ç”¨ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€è¿›è¡Œä¼˜åŒ–ï¼šå°† `ss` å’Œ `pp` è¿›è¡Œæ‹¼æ¥å¾—åˆ°å®Œæ•´å­—ç¬¦ä¸²ï¼Œå¹¶è®¡ç®—å®Œæ•´å­—ç¬¦ä¸²çš„å“ˆå¸Œæ•°ç»„å’Œæ¬¡æ–¹æ•°ç»„ã€‚éšåä»å‰å¾€åæ£€æŸ¥ `ss`ï¼Œè‹¥ã€ŒæŸä¸ªä»¥ $ss[i]$ ç»“å°¾é•¿åº¦ä¸º `m` çš„åç¼€å­—ç¬¦ä¸²å“ˆå¸Œå€¼ã€ä¸ã€Œ `pp` å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼ã€ç›¸ç­‰ï¼Œè¯´æ˜æ‰¾åˆ°äº†å‰é©±çŠ¶æ€å€¼ $f[i - m]$ï¼Œå¯è¿›è¡Œè½¬ç§»ã€‚

æˆ‘ä»¬é€šè¿‡ $O(n + m)$ å¤æ‚åº¦é¢„å¤„ç†äº†å­—ç¬¦ä¸²å“ˆå¸Œï¼Œå°†è½¬ç§»è¿‡ç¨‹ä¸­ã€Œå¤æ‚åº¦ä¸º $O(m)$ çš„å­ä¸²æˆªå–ä¸å­—ç¬¦ä¸²æ¯”è¾ƒã€æ›¿æ¢æˆäº†ã€Œå¤æ‚åº¦ä¸º $O(1)$ çš„æ•°å€¼å¯¹æ¯”ã€ï¼Œæ•´ä½“å¤æ‚åº¦ä» $O(n \times m)$ ä¸‹é™åˆ° $O(n + m)$ã€‚

> **ä¸äº†è§£ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€çš„åŒå­¦å¯è§å‰ç½® ğŸ§€ : [å­—ç¬¦ä¸²å“ˆå¸Œå…¥é—¨](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247489813&idx=1&sn=7f3bc18ca390d85b17655f7164d8e660)ã€‚é‡Œé¢è¯¦è§£å­—ç¬¦ä¸²å“ˆå¸ŒåŸºæœ¬åŸç†ä»¥åŠå“ˆå¸Œå†²çªç®€å•å¤„ç†æ–¹å¼**

Java ä»£ç ï¼š
```Java
class Solution {
    public int maxRepeating(String ss, String pp) {
        int n = ss.length(), m = pp.length(), ans = 0;
        int[] f = new int[n + 10];

        String s = ss + pp;
        int P = 1313131, N = s.length();
        long[] h = new long[N + 10], p = new long[N + 10];
        p[0] = 1;
        for (int i = 1; i <= N; i++) {
            h[i] = h[i - 1] * P + s.charAt(i - 1);
            p[i] = p[i - 1] * P;
        }
        long phash = h[N] - h[N - m] * p[m];
        
        for (int i = 1; i <= n; i++) {
            if (i - m < 0) continue;
            long cur = h[i] - h[i - m] * p[m];
            if (cur == phash) f[i] = f[i - m] + 1;
            ans = Math.max(ans, f[i]);
        }
        return ans;
    }
}
```
Python ä»£ç ï¼š
```Python
class Solution:
    def maxRepeating(self, ss: str, pp: str) -> int:
        n, m, ans = len(ss), len(pp), 0
        f = [0] * (n + 10)

        s = ss + pp
        P, N, MOD = 131, len(s), 987654321
        h, p = [0] * (N + 10), [0] * (N + 10)
        p[0] = 1
        for i in range(1, N + 1):
            h[i] = (h[i - 1] * P + ord(s[i - 1])) % MOD
            p[i] = (p[i - 1] * P) % MOD
        phash = (h[N] - h[N - m] * p[m]) % MOD

        for i in range(1, n + 1):
            if i - m < 0:
                continue
            cur = (h[i] - h[i - m] * p[m]) % MOD
            if cur == phash:
                f[i] = f[i - m] + 1
            ans = max(ans, f[i])
        return ans
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n + m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n + m)$

---

### æ€»ç»“

è¿™é‡Œç®€å•è¯´ä¸‹ã€Œçº¿æ€§ DPã€å’Œã€Œåºåˆ— DPã€çš„åŒºåˆ«ã€‚

çº¿æ€§ DP é€šå¸¸å¼ºè°ƒã€ŒçŠ¶æ€è½¬ç§»æ‰€ä¾èµ–çš„å‰é©±çŠ¶æ€ã€æ˜¯ç”±ç»™å®šæ•°ç»„æ‰€æä¾›çš„ï¼Œå³æ‹“æ‰‘åºæ˜¯ç”±åŸæ•°ç»„ç›´æ¥ç»™å‡ºã€‚æ›´å¤§ç™½è¯æ¥è¯´å°±æ˜¯é€šå¸¸æœ‰ $f[i][...]$ ä¾èµ–äº $f[i - 1][...]$ã€‚

è¿™å°±é™å®šäº†çº¿æ€§ DP çš„å¤æ‚åº¦æ˜¯ç®€å•ç”±ã€ŒçŠ¶æ€æ•°é‡ï¼ˆæˆ–è€…è¯´æ˜¯ç»´åº¦æ•°ï¼‰ã€æ‰€å†³å®šã€‚

åºåˆ— DP é€šå¸¸éœ€è¦ç»“åˆé¢˜æ„æ¥å¯»æ‰¾å‰é©±çŠ¶æ€ï¼Œå³éœ€è¦è‡ªèº«å¯»æ‰¾æ‹“æ‰‘åºå…³ç³»ï¼ˆä¾‹å¦‚æœ¬é¢˜ï¼Œéœ€è¦è‡ªå·±ç»“åˆé¢˜æ„æ¥æ‰¾åˆ°å¯è½¬ç§»çš„å‰é©±çŠ¶æ€ $f[i - m]$ï¼‰ã€‚

è¿™å°±é™å®šäº†åºåˆ— DP çš„å¤æ‚åº¦æ˜¯ç”±ã€ŒçŠ¶æ€æ•° + æ‰¾å‰é©±ã€çš„å¤æ‚åº¦æ‰€å…±åŒå†³å®šã€‚ä¹Ÿç›´æ¥å¯¼è‡´äº†åºåˆ— DP æœ‰å¾ˆå¤šç©æ³•ï¼Œå¾€å¾€èƒ½å¤Ÿç»“åˆå…¶ä»–çŸ¥è¯†ç‚¹å‡ºé¢˜ï¼Œæ¥ä¼˜åŒ–æ‰¾å‰é©±è¿™ä¸€æ“ä½œï¼Œé€šå¸¸æ˜¯åˆ©ç”¨æŸäº›æ€§è´¨ï¼Œæˆ–æ˜¯åˆ©ç”¨æ•°æ®ç»“æ„è¿›è¡Œä¼˜åŒ–ã€‚

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.1668` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

