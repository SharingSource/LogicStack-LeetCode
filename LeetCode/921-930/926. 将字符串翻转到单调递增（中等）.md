### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢](https://leetcode.cn/problems/flip-string-to-monotone-increasing/solution/by-ac_oier-h0we/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒLISã€ã€ã€Œåºåˆ— DPã€ã€ã€Œè´ªå¿ƒã€ã€ã€ŒäºŒåˆ†ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€ã€ã€Œå‰ç¼€å’Œã€ã€ã€Œæšä¸¾ã€ã€ã€Œå®¹æ–¥åŸç†ã€



å¦‚æœä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥ä¸€äº› $0$ï¼ˆå¯èƒ½æ²¡æœ‰ $0$ï¼‰åé¢è·Ÿç€ä¸€äº› $1$ï¼ˆä¹Ÿå¯èƒ½æ²¡æœ‰ $1$ï¼‰çš„å½¢å¼ç»„æˆçš„ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²æ˜¯å•è°ƒé€’å¢çš„ã€‚

ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² `s`ï¼Œä½ å¯ä»¥å°†ä»»ä½• $0$ ç¿»è½¬ä¸º $1$ æˆ–è€…å°† $1$ ç¿»è½¬ä¸º $0$ ã€‚

è¿”å›ä½¿ `s` å•è°ƒé€’å¢çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "00110"

è¾“å‡ºï¼š1

è§£é‡Šï¼šç¿»è½¬æœ€åä¸€ä½å¾—åˆ° 00111.
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = "010110"

è¾“å‡ºï¼š2

è§£é‡Šï¼šç¿»è½¬å¾—åˆ° 011111ï¼Œæˆ–è€…æ˜¯ 000111ã€‚
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šs = "00011000"

è¾“å‡ºï¼š2

è§£é‡Šï¼šç¿»è½¬å¾—åˆ° 00000000ã€‚
```

æç¤ºï¼š
* $1 <= s.length <= 10^5$
* `s[i]` ä¸º `'0'` æˆ– `'1'`

---

### LIS é—®é¢˜è´ªå¿ƒè§£

æ ¹æ®é¢˜æ„ï¼Œä¸éš¾æƒ³åˆ°å°†åŸé¢˜è¿›è¡Œç­‰ä»·è½¬æ¢ï¼š**ä»¤ `s` é•¿åº¦ä¸º $n$ï¼ŒåŸé—®é¢˜ç­‰ä»·äºåœ¨ `s` ä¸­æ‰¾åˆ°æœ€é•¿ä¸ä¸‹é™å­åºåˆ—ï¼Œè®¾å…¶é•¿åº¦ä¸º $ans$ï¼Œé‚£ä¹ˆå¯¹åº”çš„ $n - ans$ å³æ˜¯ç­”æ¡ˆã€‚**

ç”±äºæ•°æ®èŒƒå›´ä¸º $1e5$ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `LIS` é—®é¢˜çš„è´ªå¿ƒæ±‚è§£æ–¹å¼ï¼š**ä½¿ç”¨ `g` æ•°ç»„è®°å½•æ¯ä¸ªé•¿åº¦çš„æœ€å°ç»“å°¾å…ƒç´ ï¼Œå³ `g[len] = x` å«ä¹‰ä¸ºé•¿åº¦ä¸º $len$ çš„æœ€é•¿ä¸ä¸‹é™å­åºåˆ—çš„ç»“å°¾å…ƒç´ ä¸º $x$ï¼Œç„¶ååœ¨ä»å‰å¾€åå¤„ç†æ¯ä¸ª $t = s[i]$ æ—¶ï¼Œç”±äºæ˜¯æ±‚è§£ã€Œæœ€é•¿ä¸ä¸‹é™å­åºåˆ—ã€ï¼Œç­‰ä»·äºæ‰¾ã€Œæ»¡è¶³å¤§äº $t$ çš„æœ€å°ä¸‹æ ‡ã€ï¼Œè¿™å¯ä»¥è¿ç”¨ã€ŒäºŒåˆ†ã€è¿›è¡Œæ±‚è§£ã€‚**

> ä¸äº†è§£ `LIS` é—®é¢˜æˆ–è€…ä¸æ¸…æ¥š `LIS`  é—®é¢˜è´ªå¿ƒè§£æ³•çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ : **[LCS é—®é¢˜ä¸ LIS é—®é¢˜çš„ç›¸äº’å…³ç³»ï¼Œä»¥åŠ LIS é—®é¢˜çš„æœ€ä¼˜è§£è¯æ˜](https://mp.weixin.qq.com/s/tkmbIqMn_WQFSpI1_vVIaQ)**ï¼Œé‡Œé¢è¯¦ç»†è®²è§£äº† `LIS` è´ªå¿ƒè§£çš„æ­£ç¡®æ€§è¯æ˜ï¼Œä»¥åŠ `LCS` å’Œ `LIS` åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å­˜åœ¨çš„å†…åœ¨è”ç³»ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int minFlipsMonoIncr(String s) {
        char[] cs = s.toCharArray();
        int n = cs.length, ans = 0;
        int[] g = new int[n + 10];
        Arrays.fill(g, n + 10);
        for (int i = 0; i < n; i++) {
            int t = s.charAt(i) - '0';
            int l = 1, r = i + 1;
            while (l < r) {
                int mid = l + r >> 1;
                if (g[mid] > t) r = mid;
                else l = mid + 1;
            }
            g[r] = t;
            ans = Math.max(ans, r);
        }
        return n - ans;
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int minFlipsMonoIncr(string s) {
        int n = s.length(), ans = 0;
        vector<int> g(n + 10, n + 10);
        for (int i = 0; i < n; i++) {
            int t = s[i] - '0';
            int l = 1, r = i + 1;
            while (l < r) {
                int mid = l + r >> 1;
                if (g[mid] > t) r = mid;
                else l = mid + 1;
            }
            g[r] = t;
            ans = max(ans, r);
        }
        return n - ans;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def minFlipsMonoIncr(self, s: str) -> int:
        n, ans = len(s), 0
        g = [n + 10] * (n + 10)
        for i in range(n):
            t = int(s[i])
            l, r = 1, i + 1
            while l < r:
                mid = l + r >> 1
                if g[mid] > t:
                    r = mid
                else:
                    l = mid + 1
            g[r] = t
            ans = max(ans, r)
        return n - ans
```
TypeScript ä»£ç ï¼š
```TypeScript
function minFlipsMonoIncr(s: string): number {
    let n = s.length, ans = 0;
    const g = new Array(n + 10).fill(n + 10);
    for (let i = 0; i < n; i++) {
        const t = parseInt(s[i]);
        let l = 1, r = i + 1;
        while (l < r) {
            const mid = l + r >> 1;
            if (g[mid] > t) r = mid;
            else l = mid + 1;
        }
        g[r] = t;
        ans = Math.max(ans, r);
    }
    return n - ans;
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### å‰ç¼€å’Œ + æšä¸¾

æ›´è¿›ä¸€æ­¥ï¼Œåˆ©ç”¨ `s` åªå­˜åœ¨ $0$ å’Œ $1$ ä¸¤ç§æ•°å€¼ï¼Œæˆ‘ä»¬çŸ¥é“æœ€åçš„ç›®æ ‡åºåˆ—å½¢å¦‚ `000...000`ã€`000...111` æˆ– `111...111` çš„å½¢å¼ã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥æšä¸¾ç›®æ ‡åºåˆ—çš„ $0$ å’Œ $1$ åˆ†å‰²ç‚¹ä½ç½® $idx$ï¼ˆåˆ†å‰²ç‚¹æ˜¯ $0$ æ˜¯ $1$ éƒ½å¯ä»¥ï¼Œä¸æ¶ˆè€—æ”¹å˜æ¬¡æ•°ï¼‰ã€‚

äºæ˜¯é—®é¢˜è½¬æ¢ä¸ºï¼šåˆ†å‰²ç‚¹ $idx$ å·¦è¾¹æœ‰å¤šå°‘ä¸ª $1$ï¼ˆç›®æ ‡åºåˆ—ä¸­åˆ†å‰²ç‚¹å·¦è¾¹å‡ä¸º $0$ï¼Œå› æ­¤ $1$ çš„ä¸ªæ•°ä¸ºå·¦è¾¹çš„æ”¹å˜æ¬¡æ•°ï¼‰ï¼Œåˆ†å‰²ç‚¹ $idx$ çš„å³è¾¹æœ‰å¤šå°‘ä¸ª $0$ï¼ˆç›®æ ‡åºåˆ—ä¸­åˆ†å‰²ç‚¹å³è¾¹å‡ä¸º $1$ï¼Œå› æ­¤ $0$ çš„ä¸ªæ•°ä¸ºå³è¾¹çš„æ”¹å˜æ¬¡æ•°ï¼‰ï¼Œä¸¤è€…ä¹‹å’Œå³æ˜¯åˆ†å‰²ç‚¹ä¸º $idx$ æ—¶çš„æ€»å˜åŒ–æ¬¡æ•°ï¼Œæ‰€æœ‰ $idx$ çš„æ€»å˜åŒ–æ¬¡æ•°æœ€å°å€¼å³æ˜¯ç­”æ¡ˆã€‚

è€Œæ±‚è§£æŸä¸ªç‚¹å·¦è¾¹æˆ–è€…å³è¾¹æœ‰å¤šå°‘ $1$ å’Œ $0$ å¯é€šè¿‡ã€Œå‰ç¼€å’Œã€è¿›è¡Œä¼˜åŒ–ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int minFlipsMonoIncr(String s) {
        char[] cs = s.toCharArray();
        int n = cs.length, ans = n;
        int[] sum = new int[n + 10];
        for (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + (cs[i - 1] - '0');
        for (int i = 1; i <= n; i++) {
            int l = sum[i - 1], r = (n - i) - (sum[n] - sum[i]);
            ans = Math.min(ans, l + r);
        }
        return ans;
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int minFlipsMonoIncr(string s) {
        int n = s.length(), ans = n;
        vector<int> sumv(n + 10, 0);
        for (int i = 1; i <= n; i++) sumv[i] = sumv[i - 1] + (s[i - 1] - '0');
        for (int i = 1; i <= n; i++) {
            int l = sumv[i - 1], r = (n - i) - (sumv[n] - sumv[i]);
            ans = min(ans, l + r);
        }
        return ans;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def minFlipsMonoIncr(self, s: str) -> int:
        n, ans = len(s), len(s)
        sumv = [0] * (n + 10)
        for i in range(1, n + 1):
            sumv[i] = sumv[i - 1] + int(s[i - 1])
        for i in range(1, n + 1):
            l, r = sumv[i - 1], (n - i) - (sumv[n] - sumv[i])
            ans = min(ans, l + r)
        return ans
```
TypeScript ä»£ç ï¼š
```TypeScript
function minFlipsMonoIncr(s: string): number {
    let n = s.length, ans = n;
    const sumv = new Array(n + 10).fill(0);
    for (let i = 1; i <= n; i++) sumv[i] = sumv[i - 1] + parseInt(s[i - 1]);
    for (let i = 1; i <= n; i++) {
        const l = sumv[i - 1], r = (n - i) - (sumv[n] - sumv[i]);
        ans = Math.min(ans, l + r);
    }
    return ans;
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.926` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

