### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[264. ä¸‘æ•° II](https://leetcode-cn.com/problems/ugly-number-ii/solution/gong-shui-san-xie-yi-ti-shuang-jie-you-x-3nvs/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå¤šè·¯å½’å¹¶ã€ã€ã€Œä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰ã€



ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ç¬¬ `n` ä¸ª ä¸‘æ•° ã€‚

ä¸‘æ•° å°±æ˜¯åªåŒ…å«è´¨å› æ•°Â `2`ã€`3` å’ŒÂ `5`Â çš„æ­£æ•´æ•°ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šn = 10

è¾“å‡ºï¼š12

è§£é‡Šï¼š[1, 2, 3, 4, 5, 6, 8, 9, 10, 12] æ˜¯ç”±å‰ 10 ä¸ªä¸‘æ•°ç»„æˆçš„åºåˆ—ã€‚
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šn = 1

è¾“å‡ºï¼š1

è§£é‡Šï¼š1 é€šå¸¸è¢«è§†ä¸ºä¸‘æ•°ã€‚
```

æç¤ºï¼š
* $1 <= n <= 1690$

---

### åŸºæœ¬æ€è·¯

æ ¹æ®ä¸‘æ•°çš„å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ç»“è®ºï¼š

* $1$ æ˜¯æœ€å°çš„ä¸‘æ•°ã€‚
* å¯¹äºä»»æ„ä¸€ä¸ªä¸‘æ•° $x$ï¼Œå…¶ä¸ä»»æ„çš„è´¨å› æ•°ï¼ˆ$2$ã€$3$ã€$5$ï¼‰ç›¸ä¹˜ï¼Œç»“æœï¼ˆ$2x$ã€$3x$ã€$5x$ï¼‰ä»ä¸ºä¸‘æ•°ã€‚

---

### ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰

æœ‰äº†åŸºæœ¬çš„åˆ†ææ€è·¯ï¼Œä¸€ä¸ªç®€å•çš„è§£æ³•æ˜¯ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼š

1. èµ·å§‹å…ˆå°†æœ€å°ä¸‘æ•° $1$ æ”¾å…¥é˜Ÿåˆ—
2. æ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºæœ€å°å€¼ $x$ï¼Œç„¶åå°† $x$ æ‰€å¯¹åº”çš„ä¸‘æ•° $2x$ã€$3x$ å’Œ $5x$ è¿›è¡Œå…¥é˜Ÿã€‚
3. å¯¹æ­¥éª¤ 2 å¾ªç¯å¤šæ¬¡ï¼Œç¬¬ $n$ æ¬¡å‡ºé˜Ÿçš„å€¼å³æ˜¯ç­”æ¡ˆã€‚


ä¸ºäº†é˜²æ­¢åŒä¸€ä¸‘æ•°å¤šæ¬¡è¿›é˜Ÿï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ•°æ®ç»“æ„ $Set$ æ¥è®°å½•å…¥è¿‡é˜Ÿåˆ—çš„ä¸‘æ•°ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    int[] nums = new int[]{2,3,5};
    public int nthUglyNumber(int n) {
        Set<Long> set = new HashSet<>();
        Queue<Long> pq = new PriorityQueue<>();
        set.add(1L);
        pq.add(1L);
        for (int i = 1; i <= n; i++) {
            long x = pq.poll();
            if (i == n) return (int)x;
            for (int num : nums) {
                long t = num * x;
                if (!set.contains(t)) {
                    set.add(t);
                    pq.add(t);
                }
            }
        }
        return -1;
    }
}
```
Python ä»£ç ï¼š
```Python
class Solution(object):
    def nthUglyNumber(self, n):
        """
        :type n: int
        :rtype: int
        """
        nums = [2,3,5]
        explored = {1}
        pq = [1]
        for i in range(1, n+1):
            x = heapq.heappop(pq)
            if i == n:
                return x
            for num in nums:
                t = num * x
                if t not in explored:
                    explored.add(t)
                    heapq.heappush(pq,t)
        return -1
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int nthUglyNumber(int n) {
        int nums[] = {2, 3, 5};
        set<long> s;
        priority_queue<long, vector<long>, greater<long>> q;
        s.insert(1);
        q.push(1);
        for (int i = 1; i <= n; i++)
        {
            long x = q.top();
            q.pop();
            if (i == n)
                return (int)x;
            for (int num = 0; num < 3; num++)
            {
                long t = nums[num] * x;
                if (!s.count(t))
                {
                    s.insert(t);
                    q.push(t);
                }
            }
        }
        return -1;
    }
};
```
* æ—¶é—´å¤æ‚åº¦ï¼šä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å–æœ€å°å€¼ä¸º $O(1)$ï¼Œå¾€ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ å¤æ‚åº¦ä¸º $O(\log{n})$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### å¤šè·¯å½’å¹¶ï¼ˆå¤šæŒ‡é’ˆï¼‰

ä»è§£æ³•ä¸€ä¸­ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬ã€Œå¾€åäº§ç”Ÿçš„ä¸‘æ•°ã€éƒ½æ˜¯åŸºäºã€Œå·²æœ‰ä¸‘æ•°ã€è€Œæ¥ï¼ˆä½¿ç”¨ã€Œå·²æœ‰ä¸‘æ•°ã€ä¹˜ä¸Šã€Œè´¨å› æ•°ã€$2$ã€$3$ã€$5$ï¼‰ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ‰€æœ‰ä¸‘æ•°çš„æœ‰åºåºåˆ—ä¸º $a1,a2,a3,...,an$ çš„è¯ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½å¿…ç„¶èƒ½å¤Ÿè¢«ä»¥ä¸‹ä¸‰ä¸ªåºåˆ—ï¼ˆä¸­çš„è‡³å°‘ä¸€ä¸ªï¼‰è¦†ç›–ï¼š

* ç”±ä¸‘æ•° $\times 2$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 2$ã€$2 \times 2$ã€$3 \times 2$ã€$4 \times 2$ã€$5 \times 2$ã€$6 \times 2$ã€$8 \times 2$ ...
* ç”±ä¸‘æ•° $ \times 3$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 3$ã€$2 \times 3$ã€$3 \times 3$ã€$4 \times 3$ã€$5 \times 3$ã€$6 \times 3$ã€$8 \times 3$ ...
* ç”±ä¸‘æ•° $\times 5$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 5$ã€$2 \times 5$ã€$3 \times 5$ã€$4 \times 5$ã€$5 \times 5$ã€$6 \times 5$ã€$8 \times 5$ ...

ä¸¾ä¸ªğŸŒ°ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ±‚å¾— $[1, 2, 3, ... , 10, 12]$ ä¸‘æ•°åºåˆ— $arr$ çš„æœ€åä¸€ä½ï¼Œé‚£ä¹ˆè¯¥åºåˆ—å¯ä»¥çœ‹ä½œä»¥ä¸‹ä¸‰ä¸ªæœ‰åºåºåˆ—å½’å¹¶è€Œæ¥ï¼š

* $1 \times 2, 2 \times 2, 3 \times 2, ... , 10 \times 2, 12 \times 2$ ï¼Œå°† $2$ æå‡ºï¼Œå³ $arr \times 2$
* $1 \times 3, 2 \times 3, 3 \times 3, ... , 10 \times 3, 12 \times 3$ ï¼Œå°† $3$ æå‡ºï¼Œå³ $arr \times 3$
* $1 \times 5, 2 \times 5, 3 \times 5, ... , 10 \times 5, 12 \times 5$ ï¼Œå°† $5$ æå‡ºï¼Œå³ $arr \times 5$

å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆæ¥æŒ‡å‘ç›®æ ‡åºåˆ— $arr$ çš„æŸä¸ªä¸‹æ ‡ï¼ˆä¸‹æ ‡ $0$ ä½œä¸ºå“¨å…µä¸ä½¿ç”¨ï¼Œèµ·å§‹éƒ½ä¸º $1$ï¼‰ï¼Œä½¿ç”¨ $arr[ä¸‹æ ‡] \times è´¨å› æ•°$ ä»£è¡¨å½“å‰ä½¿ç”¨åˆ°ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„å“ªä¸€ä½ï¼ŒåŒæ—¶ä½¿ç”¨ $idx$ è¡¨ç¤ºå½“å‰ç”Ÿæˆåˆ° $arr$ å“ªä¸€ä½ä¸‘æ•°ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int nthUglyNumber(int n) {
        // ans ç”¨ä½œå­˜å‚¨å·²æœ‰ä¸‘æ•°ï¼ˆä»ä¸‹æ ‡ 1 å¼€å§‹å­˜å‚¨ï¼Œç¬¬ä¸€ä¸ªä¸‘æ•°ä¸º 1ï¼‰
        int[] ans = new int[n + 1];
        ans[1] = 1;
        // ç”±äºä¸‰ä¸ªæœ‰åºåºåˆ—éƒ½æ˜¯ç”±ã€Œå·²æœ‰ä¸‘æ•°ã€*ã€Œè´¨å› æ•°ã€è€Œæ¥
        // i2ã€i3 å’Œ i5 åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªæœ‰åºåºåˆ—å½“å‰ä½¿ç”¨åˆ°å“ªä¸€ä½ã€Œå·²æœ‰ä¸‘æ•°ã€ä¸‹æ ‡ï¼ˆèµ·å§‹éƒ½æŒ‡å‘ 1ï¼‰
        for (int i2 = 1, i3 = 1, i5 = 1, idx = 2; idx <= n; idx++) {
            // ç”± ans[iX] * X å¯å¾—å½“å‰æœ‰åºåºåˆ—æŒ‡å‘å“ªä¸€ä½
            int a = ans[i2] * 2, b = ans[i3] * 3, c = ans[i5] * 5;
            // å°†ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„æœ€å°ä¸€ä½å­˜å…¥ã€Œå·²æœ‰ä¸‘æ•°ã€åºåˆ—ï¼Œå¹¶å°†å…¶ä¸‹æ ‡åç§»
            int min = Math.min(a, Math.min(b, c));
            // ç”±äºå¯èƒ½ä¸åŒæœ‰åºåºåˆ—ä¹‹é—´äº§ç”Ÿç›¸åŒä¸‘æ•°ï¼Œå› æ­¤åªè¦ä¸€æ ·çš„ä¸‘æ•°å°±è·³è¿‡ï¼ˆä¸èƒ½ä½¿ç”¨ else if ï¼‰
            if (min == a) i2++; 
            if (min == b) i3++;
            if (min == c) i5++;
            ans[idx] = min;
        }
        return ans[n];
    }
}
```
Python ä»£ç ï¼š
```Python
class Solution(object):
    def nthUglyNumber(self, n):
        """
        :type n: int
        :rtype: int
        """
        # ans ç”¨ä½œå­˜å‚¨å·²æœ‰ä¸‘æ•°ï¼ˆä»ä¸‹æ ‡ 1 å¼€å§‹å­˜å‚¨ï¼Œç¬¬ä¸€ä¸ªä¸‘æ•°ä¸º 1ï¼‰
        ans = [0] * (n+1)
        ans[1] = 1
        # ç”±äºä¸‰ä¸ªæœ‰åºåºåˆ—éƒ½æ˜¯ç”±ã€Œå·²æœ‰ä¸‘æ•°ã€*ã€Œè´¨å› æ•°ã€è€Œæ¥
        # i2ã€i3 å’Œ i5 åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªæœ‰åºåºåˆ—å½“å‰ä½¿ç”¨åˆ°å“ªä¸€ä½ã€Œå·²æœ‰ä¸‘æ•°ã€ä¸‹æ ‡ï¼ˆèµ·å§‹éƒ½æŒ‡å‘ 1ï¼‰
        i2 = i3 = i5 = 1
        idx = 2
        while idx <= n:
            # ç”± ans[iX] * X å¯å¾—å½“å‰æœ‰åºåºåˆ—æŒ‡å‘å“ªä¸€ä½
            a,b,c = ans[i2] *2,ans[i3]*3,ans[i5]*5
            # å°†ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„æœ€å°ä¸€ä½å­˜å…¥ã€Œå·²æœ‰ä¸‘æ•°ã€åºåˆ—ï¼Œå¹¶å°†å…¶ä¸‹æ ‡åç§»
            m = min(a,b,c)
            # ç”±äºå¯èƒ½ä¸åŒæœ‰åºåºåˆ—ä¹‹é—´äº§ç”Ÿç›¸åŒä¸‘æ•°ï¼Œå› æ­¤åªè¦ä¸€æ ·çš„ä¸‘æ•°å°±è·³è¿‡ï¼ˆä¸èƒ½ä½¿ç”¨ else if ï¼‰
            if m == a:
                i2 += 1
            if m == b:
                i3 += 1
            if m == c:
                i5 += 1
            ans[idx] = m
            idx += 1
        return ans[n]
```
JavaScript ä»£ç ï¼š
```JavaScript
/**
 * @param {number} n
 * @return {number}
 */
var nthUglyNumber = function(n) {
    const ans=new Array(n+1);
    ans[1]=1;
    for(let i2=1, i3=1, i5=1, idx=2;idx<=n;idx++){
        let a=ans[i2]*2, b=ans[i3]*3, c=ans[i5]*5;
        let min=Math.min(a, b, c);
        if(min===a) i2++;
        if(min===b) i3++;
        if(min===c) i5++;
        ans[idx]=min;
    }
    return ans[n];
};
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    int nthUglyNumber(int n) {
        // å­˜å‚¨ä¸‘æ•°
        int *arr = new int[n + 1];
        arr[1] = 1;
        
        for (int x = 1, y = 1, z = 1, index = 2; index <= n; index++){
            int a = arr[x] * 2, b = arr[y] * 3, c = arr[z] * 5;
            int m = min(a, min(b, c));
            if (m == a)x++;
            if (m == b)y++;
            if (m == c)z++;
            arr[index] = m;
        }
        int ans = arr[n];
        delete[] arr;
        return ans;
    }
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.264` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

