### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[1094. æ‹¼è½¦](https://leetcode.cn/problems/car-pooling/solutions/2550276/gong-shui-san-xie-tu-jie-chai-fen-ru-men-opii/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€Œå·®åˆ†ã€ã€ã€Œå‰ç¼€å’Œã€



è½¦ä¸Šæœ€åˆæœ‰ `capacity` ä¸ªç©ºåº§ä½ï¼Œè½¦åªèƒ½å‘ä¸€ä¸ªæ–¹å‘è¡Œé©¶ï¼ˆä¸å…è®¸æ‰å¤´æˆ–æ”¹å˜æ–¹å‘ï¼‰ã€‚

ç»™å®šæ•´æ•° `capacity` å’Œä¸€ä¸ªæ•°ç»„ `trips`,  $trip[i] = [numPassengers_{i}, from_{i}, to_{i}]$ è¡¨ç¤ºç¬¬ `i` æ¬¡æ—…è¡Œæœ‰ $numPassengers_{i}$ ä¹˜å®¢ï¼Œæ¥ä»–ä»¬å’Œæ”¾ä»–ä»¬çš„ä½ç½®åˆ†åˆ«æ˜¯ $from_{i}$ å’Œ $to_{i}$ ã€‚

è¿™äº›ä½ç½®æ˜¯ä»æ±½è½¦çš„åˆå§‹ä½ç½®å‘ä¸œçš„å…¬é‡Œæ•°ã€‚

å½“ä¸”ä»…å½“ä½ å¯ä»¥åœ¨æ‰€æœ‰ç»™å®šçš„è¡Œç¨‹ä¸­æ¥é€æ‰€æœ‰ä¹˜å®¢æ—¶ï¼Œè¿”å› `true`ï¼Œå¦åˆ™è¯·è¿”å› `false`ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼štrips = [[2,1,5],[3,3,7]], capacity = 4

è¾“å‡ºï¼šfalse
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼štrips = [[2,1,5],[3,3,7]], capacity = 5

è¾“å‡ºï¼štrue
```

æç¤ºï¼š
* $1 <= trips.length <= 1000$
* $trips[i].length = 3$
* $1 <= numPassengers_{i} <= 100$
* $0 <= from_{i} < to_{i} <= 1000$
* $1 <= capacity <= 10^5$

---

### å·®åˆ†

ä»æœ´ç´ çš„æƒ³æ³•å¼€å§‹ï¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ `cnt`ï¼Œç”¨äºå­˜å‚¨ä»æŸä¸ªç«™ç‚¹å‡ºå‘æ—¶ï¼Œè½¦ä¸Šçš„ä¹˜å®¢æ•°é‡ã€‚

ä¾‹å¦‚ $cnt[x] = c$ å«ä¹‰ä¸ºåœ¨ç«™ç‚¹ $x$ å‡ºå‘æ—¶ï¼ˆåœ¨è¯¥ç«™ç‚¹çš„ä¸‹è½¦å’Œä¸Šè½¦å‡å®Œæˆï¼‰ï¼Œè½¦ä¸Šä¹˜å®¢æ•°ä¸º $c$ ä¸ªã€‚

å¯¹äºæ¯ä¸ª $trips[i] = (c, a, b)$ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ $[a, b)$ èŒƒå›´å†…çš„ $cnt[j]$ è¿›è¡ŒåŠ  $c$ æ“ä½œã€‚

å¤„ç†å®Œ `trips` åï¼Œæ£€æŸ¥æ‰€æœ‰ç«™ç‚¹çš„ä¹˜å®¢äººæ•°ï¼Œæ ¹æ®æ˜¯å¦æ»¡è¶³ `capacity` é™åˆ¶è¿”å›ç­”æ¡ˆã€‚

å› æ­¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºã€ŒåŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢ã€çš„ç»å…¸é—®é¢˜ï¼Œå¯ä½¿ç”¨ã€Œå·®åˆ†ã€æ±‚è§£ã€‚

æ‰€è°“â€œå·®åˆ†â€ï¼Œæ˜¯æŒ‡ **åŸæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ä¸å‰ä¸€å…ƒç´ ä¹‹å·®æ‰€å½¢æˆçš„æ•°ç»„**ï¼Œä¸ä¹‹ç›¸å¯¹åº”çš„æ˜¯â€œå‰ç¼€å’Œâ€ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹åŸæ•°ç»„è¿›è¡Œè¯¸ä½ç´¯åŠ ï¼ˆå‰ç¼€è®¡ç®—æ“ä½œï¼‰ï¼Œæ‰€å¾—åˆ°çš„æ•°ç»„ä¸ºå‰ç¼€å’Œæ•°ç»„ã€‚å·®åˆ†æ•°ç»„ï¼Œåˆ™æ˜¯å¯¹å…¶æ‰§è¡Œå‰ç¼€è®¡ç®—åï¼Œèƒ½å¤Ÿå¾—åˆ°åŸæ•°ç»„çš„é‚£ä¸ªæ•°ç»„ ğŸ¤£ ã€‚

å…³äºã€Œå·®åˆ†æ•°ç»„ - åŸæ•°ç»„ - å‰ç¼€å’Œæ•°ç»„ã€ä¸‰è€…å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š

![](https://pic.leetcode.cn/1701478324-ArYSEo-image.png)

å‰ç¼€å’Œæ•°ç»„çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯åˆ©ç”¨ã€Œå®¹æ–¥åŸç†ã€å¿«é€Ÿæ±‚è§£æŸæ®µä¹‹å’Œã€‚ä¾‹å¦‚è¦æŸ¥è¯¢åŸæ•°ç»„ `nums` ä¸­ä¸‹æ ‡èŒƒå›´ $[l, r]$ çš„å’Œï¼Œå¯é€šè¿‡ $sum[r] - sum[l - 1]$ å¿«é€Ÿæ±‚è§£ã€‚

å·®åˆ†æ•°ç»„çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯å¸®åŠ©å¿«é€Ÿä¿®æ”¹æŸæ®µåŒºé—´ã€‚

ç”±äºå·®åˆ†æ•°ç»„æ‰§è¡Œã€Œå‰ç¼€è®¡ç®—ã€åå¾—åˆ°çš„æ˜¯åŸæ•°ç»„ï¼Œå› æ­¤åœ¨å·®åˆ†æ•°ç»„ä¸Šä¿®æ”¹æŸä¸ªå€¼ï¼Œä¼šå¯¹åŸæ•°ç»„æŸæ®µåç¼€äº§ç”Ÿç›¸åŒçš„å½±å“ã€‚

![](https://pic.leetcode.cn/1701478248-GRSIwG-image.png)

å› æ­¤ï¼Œ**å½“æˆ‘ä»¬æƒ³è¦å¯¹åŸæ•°ç»„çš„ $[l, r]$ è¿›è¡Œæ•´ä½“ä¿®æ”¹æ—¶ï¼Œåªéœ€è¦å¯¹å·®åˆ†æ•°ç»„çš„ $l$ å’Œ $r + 1$ ä½ç½®æ‰§è¡Œç›¸åº”æ“ä½œå³å¯**ã€‚

ä¸¾ä¸ª ğŸŒ°ï¼Œå‡è®¾æƒ³å¯¹åŸæ•°ç»„ `nums` çš„ $[l, r]$ è¿›è¡Œæ•´ä½“â€œåŠ ä¸€â€æ“ä½œï¼Œé‚£ä¹ˆå¯è½¬æ¢ä¸ºå¯¹å·®åˆ†æ•°ç»„ `c[l]` çš„åŠ ä¸€æ“ä½œï¼ˆç­‰ä»·å¯¹åŸæ•°ç»„çš„ $[l, n - 1]$ è¿›è¡ŒåŠ ä¸€ï¼‰ï¼Œä»¥åŠå¯¹å·®åˆ†æ•°ç»„ `c[r + 1]` çš„å‡ä¸€æ“ä½œï¼ˆç­‰ä»·äºå¯¹åŸæ•°ç»„çš„ $[r + 1, n - 1]$ è¿›è¡Œå‡ä¸€ï¼Œæœ€ç»ˆåªæœ‰ $[l, r]$ æœ‰åŠ ä¸€æ•ˆæœï¼‰ã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¯¹ã€Œå·®åˆ†ã€çš„åŸºæœ¬å­¦ä¹ ï¼š**å°†åŸæ•°ç»„çš„åŒºé—´ä¿®æ”¹ç­‰ä»·ä¸ºå·®åˆ†æ•°ç»„çš„ç‰¹å®šä½ç½®ä¿®æ”¹**ã€‚

å›åˆ°æœ¬é¢˜ï¼Œèµ·å§‹å…ˆç”¨ `nums` æ¥ä½œä¸ºå·®åˆ†æ•°ç»„ï¼Œå¯¹äº $trips[i] = (c, a, b)$ï¼Œæœ‰ $c$ ä¸ªä¹˜å®¢åœ¨ $a$ ç‚¹ä¸Šè½¦ï¼Œåœ¨ $b$ ç‚¹ä¸‹è½¦ï¼Œå› æ­¤å¯¹ $[a, b)$ è¿›è¡Œæ•´ä½“åŠ  $c$ æ“ä½œï¼Œå¯¹åº”å·®åˆ†æ•°ç»„æ“ä½œ `nums[a] += c; nums[b] -= c`ã€‚

å¤„ç†å®Œ `trips` åï¼Œå¯¹å·®åˆ†æ•°ç»„ `nums` è¿›è¡Œå‰ç¼€è®¡ç®—ï¼ˆå¯ç›´æ¥å¤ç”¨ `nums`ï¼Œè¿›è¡ŒåŸåœ°è®¡ç®—ï¼‰ï¼Œä¾¿å¯å¾—åˆ°å„ä¸ªç«™ç‚¹çš„ä¹˜å®¢æ•°é‡ï¼Œä¸ `capacity` æ¯”è¾ƒå¾—å‡ºç­”æ¡ˆã€‚

ä¸€äº›ç»†èŠ‚ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œäººä¸ºè§„å®šç«™ç‚¹ç¼–å·ä» $1$ å¼€å§‹ã€‚

Java ä»£ç ï¼š

```Java
class Solution {
    public boolean carPooling(int[][] trips, int capacity) {
        int[] nums = new int[1010];
        for (int[] t : trips) {
            int c = t[0], a = t[1], b = t[2];
            nums[a + 1] += c; nums[b + 1] -= c;
        }
        for (int i = 1; i <= 1000; i++) {
            nums[i] += nums[i - 1];
            if (nums[i] > capacity) return false;
        }
        return true;
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    bool carPooling(vector<vector<int>>& trips, int capacity) {
        vector<int> nums(1010, 0);
        for (const auto& t : trips) {
            int c = t[0], a = t[1], b = t[2];
            nums[a + 1] += c; nums[b + 1] -= c;
        }
        for (int i = 1; i <= 1000; i++) {
            nums[i] += nums[i - 1];
            if (nums[i] > capacity) return false;
        }
        return true;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def carPooling(self, trips: List[List[int]], capacity: int) -> bool:
        nums = [0] * 1010
        for t in trips:
            c, a, b = t[0], t[1], t[2]
            nums[a + 1] += c
            nums[b + 1] -= c
        for i in range(1, 1001):
            nums[i] += nums[i - 1]
            if nums[i] > capacity: return False
        return True
```
TypeScript ä»£ç ï¼š
```TypeScript
function carPooling(trips: number[][], capacity: number): boolean {
    const nums = new Array(1010).fill(0);
    for (const t of trips) {
        const c = t[0], a = t[1], b = t[2];
        nums[a + 1] += c; nums[b + 1] -= c;
    }
    for (let i = 1; i <= 1000; i++) {
        nums[i] += nums[i - 1];
        if (nums[i] > capacity) return false;
    }
    return true;
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n + m)$ï¼Œå…¶ä¸­ $n$ ä¸ºæ•°ç»„ `trips` å¤§å°ï¼›$m = 1000$ ä¸ºä½ç½®å€¼åŸŸå¤§å°
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.1094` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

