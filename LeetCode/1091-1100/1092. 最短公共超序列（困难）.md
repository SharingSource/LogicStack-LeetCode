### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[1092. æœ€çŸ­å…¬å…±è¶…åºåˆ—](https://leetcode.cn/problems/shortest-common-supersequence/solution/by-ac_oier-s346/)** ï¼Œéš¾åº¦ä¸º **å›°éš¾**ã€‚

Tag : ã€Œåºåˆ— DPã€ã€ã€ŒLCSã€ã€ã€Œæœ€é•¿å…¬å…±å­åºåˆ—ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€ã€ã€Œæ„é€ ã€ã€ã€ŒåŒæŒ‡é’ˆã€



ç»™å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²Â `str1` å’ŒÂ `str2`ï¼Œè¿”å›åŒæ—¶ä»¥Â `str1`Â å’ŒÂ `str2`Â ä½œä¸ºå­åºåˆ—çš„æœ€çŸ­å­—ç¬¦ä¸²ã€‚å¦‚æœç­”æ¡ˆä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥è¿”å›æ»¡è¶³æ¡ä»¶çš„ä»»æ„ä¸€ä¸ªç­”æ¡ˆã€‚

ï¼ˆå¦‚æœä»å­—ç¬¦ä¸² `T` ä¸­åˆ é™¤ä¸€äº›å­—ç¬¦ï¼ˆä¹Ÿå¯èƒ½ä¸åˆ é™¤ï¼Œå¹¶ä¸”é€‰å‡ºçš„è¿™äº›å­—ç¬¦å¯ä»¥ä½äº `T` ä¸­çš„Â ä»»æ„ä½ç½®ï¼‰ï¼Œå¯ä»¥å¾—åˆ°å­—ç¬¦ä¸² `S`ï¼Œé‚£ä¹ˆÂ `S` å°±æ˜¯Â `T` çš„å­åºåˆ—ï¼‰

ç¤ºä¾‹ï¼š
```
è¾“å…¥ï¼šstr1 = "abac", str2 = "cab"

è¾“å‡ºï¼š"cabac"

è§£é‡Šï¼š
str1 = "abac" æ˜¯ "cabac" çš„ä¸€ä¸ªå­ä¸²ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åˆ å» "cabac" çš„ç¬¬ä¸€ä¸ª "c"å¾—åˆ° "abac"ã€‚ 
str2 = "cab" æ˜¯ "cabac" çš„ä¸€ä¸ªå­ä¸²ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åˆ å» "cabac" æœ«å°¾çš„ "ac" å¾—åˆ° "cab"ã€‚
æœ€ç»ˆæˆ‘ä»¬ç»™å‡ºçš„ç­”æ¡ˆæ˜¯æ»¡è¶³ä¸Šè¿°å±æ€§çš„æœ€çŸ­å­—ç¬¦ä¸²ã€‚
```

æç¤ºï¼š
* $1 <= str1.length, str2.length <= 1000$
* `str1` å’ŒÂ `str2`Â éƒ½ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚

---

### LCS æ±‚å…·ä½“æ–¹æ¡ˆ + æ„é€ 

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä»¤ `str1` ä¸º `s1`ï¼Œ`str2` ä¸º `s2`ï¼Œå¹¶å°†ä¸¤è€…é•¿åº¦è®°ä¸º $n$ å’Œ $m$ã€‚

å®¹æ˜“æƒ³åˆ°æœ€ç»ˆçš„æ–¹æ¡ˆå¿…ç„¶æ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šä¸¤å­—ç¬¦ä¸²çš„å…¬å…±å­åºåˆ—ï¼ˆä¸”å¿…ç„¶æ˜¯æœ€é•¿å…¬å…±å­åºåˆ—ï¼‰+ ä¸¤è€…ç‰¹æœ‰çš„å­—ç¬¦éƒ¨åˆ†ã€‚

åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨å¯¹ä¸¤è€…æ±‚ `LCS`ï¼Œå¹¶åœ¨æ±‚å…·ä½“æ–¹æ¡ˆæ—¶éµå¾ªï¼šå±äºæœ€é•¿å…¬å…±å­åºåˆ—çš„å­—ç¬¦åªæ·»åŠ ä¸€æ¬¡ï¼Œè€Œç‰¹æœ‰äº `s1` æˆ– `s2` çš„å­—ç¬¦åˆ™ç‹¬è‡ªæ·»åŠ ä¸€æ¬¡ã€‚

æ±‚è§£ `LCS` éƒ¨åˆ†æˆ‘ä»¬å®šä¹‰ **$f[i][j]$ ä»£è¡¨è€ƒè™‘ $s1$ çš„å‰ $i$ ä¸ªå­—ç¬¦ã€è€ƒè™‘ $s2$ çš„å‰ $j$ çš„å­—ç¬¦ï¼Œå½¢æˆçš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ï¼ˆä¸ºäº†æ–¹ä¾¿ï¼Œä»¤ä¸‹æ ‡ä» $1$ å¼€å§‹ï¼‰ã€‚**

å½“æœ‰äº†ã€ŒçŠ¶æ€å®šä¹‰ã€ä¹‹åï¼ŒåŸºæœ¬ä¸Šã€Œè½¬ç§»æ–¹ç¨‹ã€å°±æ˜¯å‘¼ä¹‹æ¬²å‡ºï¼š

* `s1[i]==s2[j]` : $f[i][j]=f[i-1][j-1]+1$ã€‚ä»£è¡¨**å¿…ç„¶ä½¿ç”¨ $s1[i]$ ä¸ $s2[j]$ æ—¶** `LCS` çš„é•¿åº¦ã€‚
* `s1[i]!=s2[j]` : $f[i][j]=max(f[i-1][j], f[i][j-1])$ã€‚ä»£è¡¨**å¿…ç„¶ä¸ä½¿ç”¨ $s1[i]$ï¼ˆä½†å¯èƒ½ä½¿ç”¨$s2[j]$ï¼‰æ—¶** å’Œ **å¿…ç„¶ä¸ä½¿ç”¨ $s2[j]$ï¼ˆä½†å¯èƒ½ä½¿ç”¨$s1[i]$ï¼‰æ—¶** `LCS` çš„é•¿åº¦ã€‚

> **ä¸äº†è§£ LCS çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ : [LCS æ¨¡æ¿é¢˜](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247492097&idx=1&sn=f51f29d86df809d8ac43a40a1369b3d6)**

å½“é¢„å¤„ç†å‡ºåŠ¨è§„æ•°ç»„ `f` ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ã€ŒåŒæŒ‡é’ˆã€å’Œã€Œé€šç”¨ `DP` æ±‚å…·ä½“æ–¹æ¡ˆã€çš„åšæ³•è¿›è¡Œæ„é€ ï¼šä½¿ç”¨ `i` å˜é‡æŒ‡å‘ `s1` çš„å°¾éƒ¨ï¼ˆå³èµ·å§‹æœ‰ $i = n$ï¼‰ï¼Œä½¿ç”¨ `j` å˜é‡æŒ‡å‘ `s2` çš„å°¾éƒ¨ï¼ˆå³èµ·å§‹æœ‰ $j = m$ï¼‰ï¼Œæ ¹æ® `i` å’Œ `j` å½“å‰æ‰€åœ¨ä½ç½®ä»¥åŠ $f[i][j]$ ä»ä½•å€¼è½¬ç§»è€Œæ¥ï¼š

1. è‹¥ `i` æˆ– `j` å…¶ä¸€èµ°å®Œï¼ˆ`i = 0` æˆ– `j = 0`ï¼‰ï¼Œå°†å‰©ä½™å­—ç¬¦è¿½åŠ åˆ°ç­”æ¡ˆä¸­ï¼›
2. å½“ $f[i][j] = f[i - 1][j - 1] + 1$ ä¸” $s1[i] = s2[j]$ æ—¶ï¼ˆå¯ç®€åŒ–ä¸º $s1[i] = s2[j]$ åˆ¤æ–­ï¼‰ï¼Œæ­¤æ—¶ `i` æŒ‡å‘çš„å­—ç¬¦å’Œ `j` æŒ‡å‘çš„å­—ç¬¦ä¸ºç›¸åŒï¼Œä¸”ä¸º `LCS` ä¸­çš„å­—ç¬¦ï¼Œå°†å…¶è¿½åŠ åˆ°å…·ä½“æ–¹æ¡ˆï¼Œå¹¶è®© `i` å’Œ `j` åŒæ—¶åç§»ï¼›
3. å½“ $f[i][j] = f[i - 1][j]$ï¼Œå°† `s1[i]` è¿½åŠ åˆ°ç­”æ¡ˆä¸­ï¼Œä»¤ `i` åç§»ï¼›
4. å½“ $f[i][j] = f[i][j - 1]$ï¼Œå°† `s2[j]` è¿½åŠ åˆ°ç­”æ¡ˆä¸­ï¼Œä»¤ `j` åç§»ã€‚

å½“æ¡ä»¶ `3` å’Œ `4` åŒæ—¶æ»¡è¶³æ—¶ï¼Œç”±äºåªéœ€è¦è¾“å‡ºä»»ä¸€å…·ä½“æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä»»å–å…¶ä¸€å³å¯ã€‚

æœ€åï¼Œç”±äºæˆ‘ä»¬æ˜¯ä»åå¾€å‰è¿›è¡Œæ„é€ ï¼Œåœ¨è¿”å›æ—¶éœ€è¦å†è¿›è¡Œä¸€æ¬¡ç¿»è½¬ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public String shortestCommonSupersequence(String str1, String str2) {
        int n = str1.length(), m = str2.length();
        str1 = " " + str1; str2 = " " + str2;
        char[] s1 = str1.toCharArray(), s2 = str2.toCharArray();
        int[][] f = new int[n + 10][m + 10];
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j <= m; j++) {
                if (s1[i] == s2[j]) f[i][j] = f[i - 1][j - 1] + 1;
                else f[i][j] = Math.max(f[i - 1][j], f[i][j - 1]);
            }
        }
        StringBuilder sb = new StringBuilder();
        int i = n, j = m;
        while (i > 0 || j > 0) {
            if (i == 0) sb.append(s2[j--]);
            else if (j == 0) sb.append(s1[i--]);
            else {
                if (s1[i] == s2[j]) {
                    sb.append(s1[i]);
                    i--; j--;
                } else if (f[i][j] == f[i - 1][j]) {
                    sb.append(s1[i--]);
                } else {
                    sb.append(s2[j--]);
                }
            }
        }
        return sb.reverse().toString();
    }
}
```
C++ ä»£ç ï¼š
```C++
class Solution {
public:
    string shortestCommonSupersequence(string str1, string str2) {
        int n = str1.size(), m = str2.size();
        str1 = " " + str1; str2 = " " + str2;
        vector<vector<int>> f(n + 10, vector<int>(m + 10));
        for (int i = 1; i <= n; ++i) {
            for (int j = 1; j <= m; ++j) {
                if (str1[i] == str2[j])
                    f[i][j] = f[i - 1][j - 1] + 1;
                else 
                    f[i][j] = max(f[i - 1][j], f[i][j - 1]);
            }
        }
        string res;
        int i = n, j = m;
        while (i > 0 || j > 0) {
            if (i == 0) res += str2[j--];
            else if (j == 0) res += str1[i--];
            else {
                if (str1[i] == str2[j]) {
                    res += str1[i];
                    i--; j--;
                }
                else if (f[i][j] == f[i - 1][j]) res += str1[i--];
                else res += str2[j--];
            }
        }
        reverse(res.begin(), res.end());
        return res;
    }
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def shortestCommonSupersequence(self, s1: str, s2: str) -> str:
        n, m = len(s1), len(s2)
        s1 = " " + s1
        s2 = " " + s2
        f = [[0] * (m + 10) for _ in range(n + 10)]
        for i in range(1, n + 1):
            for j in range(1, m + 1):
                f[i][j] = f[i - 1][j - 1] + 1 if s1[i] == s2[j] else max(f[i - 1][j], f[i][j - 1])
        ans = ""
        i, j = n, m
        while i > 0 or j > 0:
            if i == 0:
                ans += s2[j]
                j -= 1
            elif j == 0:
                ans += s1[i]
                i -= 1
            else:
                if s1[i] == s2[j]:
                    ans += s1[i]
                    i -= 1
                    j -= 1
                elif f[i][j] == f[i - 1][j]:
                    ans += s1[i]
                    i -= 1
                else:
                    ans += s2[j]
                    j -= 1
        return ans[::-1]
```
TypeScript ä»£ç ï¼š
```TypeScript
function shortestCommonSupersequence(s1: string, s2: string): string {
    const n = s1.length, m = s2.length
    s1 = " " + s1; s2 = " " + s2
    const f = new Array<Array<number>>()
    for (let i = 0; i < n + 10; i++) f.push(new Array<number>(m + 10).fill(0))
    for (let i = 1; i <= n; i++) {
        for (let j = 1; j <= m; j++) {
            if (s1[i] == s2[j]) f[i][j] = f[i - 1][j - 1] + 1
            else f[i][j] = Math.max(f[i - 1][j], f[i][j - 1])
        }
    }
    let ans = ""
    let i = n, j = m
    while (i > 0 || j > 0) {
        if (i == 0) ans += s2[j--]
        else if (j == 0) ans += s1[i--]
        else {
            if (s1[i] == s2[j]) {
                ans += s1[i]
                i--; j--
            } else if (f[i][j] == f[i - 1][j]) {
                ans += s1[i--]
            } else {
                ans += s2[j--]
            }
        }
    }
    return ans.split('').reverse().join('')
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š`LCS` å¤æ‚åº¦ä¸º $O(n \times m)$ï¼›æ„é€ ç­”æ¡ˆå¤æ‚åº¦ä¸º $O(n \times m)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n \times m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n \times m)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.1092` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

