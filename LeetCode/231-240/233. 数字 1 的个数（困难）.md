### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[233. æ•°å­— 1 çš„ä¸ªæ•°](https://leetcode-cn.com/problems/number-of-digit-one/solution/gong-shui-san-xie-jiang-shu-wei-dp-wen-t-c9oi/)** ï¼Œéš¾åº¦ä¸º **å›°éš¾**ã€‚

Tag : ã€ŒåŠ¨æ€è§„åˆ’ã€ã€ã€Œæ•°ä½ DPã€ã€ã€Œæ¨¡æ‹Ÿã€



ç»™å®šä¸€ä¸ªæ•´æ•° $n$ï¼Œè®¡ç®—æ‰€æœ‰å°äºç­‰äº $n$ çš„éè´Ÿæ•´æ•°ä¸­æ•°å­— $1$ å‡ºç°çš„ä¸ªæ•°ã€‚


ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šn = 13

è¾“å‡ºï¼š6
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šn = 0

è¾“å‡ºï¼š0
```

æç¤ºï¼š
* 0 <= n <= $2 * 10^9$

---

### åŸºæœ¬åˆ†æ

è¿™æ˜¯ä¸€é“ç»å…¸çš„ã€Œæ•°ä½ DPã€æ¨¡æ¿é¢˜çš„ç®€åŒ–ç‰ˆï¼ŒåŸé¢˜åœ¨ [è¿™é‡Œ](https://www.luogu.com.cn/problem/P1980) ã€‚

è¿™å‡ å¤©æ¯æ—¥ä¸€é¢˜å‡ºå¾—æŒºå¥½ï¼Œã€Œåºåˆ— DPã€ã€ã€ŒåŒºé—´ DPã€ã€ã€Œæ•°ä½ DPã€è½®ç€æ¥ ğŸ¤£

ä½†ç”±äºæœ¬é¢˜åªéœ€æ±‚ $1$ å‡ºç°çš„æ¬¡æ•°ï¼Œè€Œä¸éœ€è¦æ±‚è§£ $0$ åˆ° $9$ çš„å‡ºç°æ¬¡æ•°ï¼ŒåŒæ—¶æ„å‘³ç€ä¸éœ€è¦è€ƒè™‘ç»Ÿè®¡ $0$ æ¬¡æ•°æ—¶çš„å‰å¯¼é›¶è¾¹ç•Œé—®é¢˜ã€‚

å› æ­¤ï¼Œä¹Ÿå¯ä»¥ä¸å½“ä½œæ•°ä½ DP é¢˜æ¥åšï¼Œåªå½“ä½œä¸€é“è®¡æ•°ç±»æ¨¡æ‹Ÿé¢˜æ¥æ±‚è§£ã€‚

---

### è®¡æ•°ç±»æ¨¡æ‹Ÿ

å›åˆ°æœ¬é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®— $[1, n]$ èŒƒå›´å†…æ‰€æœ‰æ•°ä¸­ $1$ å‡ºç°çš„æ¬¡æ•°ã€‚

æˆ‘ä»¬å¯ä»¥ç»Ÿè®¡ $1$ åœ¨æ¯ä¸€ä½å‡ºç°çš„æ¬¡æ•°ï¼Œå°†å…¶ç´¯åŠ èµ·æ¥å³æ˜¯ç­”æ¡ˆã€‚

ä¸¾ä¸ª ğŸŒ°ï¼Œå¯¹äºä¸€ä¸ªé•¿åº¦ä¸º $m$ çš„æ•°å­— $n$ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å…¶åœ¨ã€Œä¸ªä½ï¼ˆä»å³èµ·ç¬¬ $1$ ä½ï¼‰ã€ã€ã€Œåä½ï¼ˆç¬¬ $2$ ä½ï¼‰ã€ã€ã€Œç™¾ä½ï¼ˆç¬¬ $3$ ä½ï¼‰ã€å’Œã€Œç¬¬ $m$ ä½ã€ä¸­ $1$ å‡ºç°çš„æ¬¡æ•°ã€‚

å‡è®¾æœ‰ $n = abcde$ï¼Œå³ $m = 5$ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ç»Ÿè®¡ç¬¬ $3$ ä½ä¸­ $1$ å‡ºç°çš„æ¬¡æ•°ï¼Œå³å¯ç»Ÿè®¡æ»¡è¶³ $--1--$ å½¢å¼ï¼ŒåŒæ—¶æ»¡è¶³ $1 <= --1-- <= abcde$ è¦æ±‚çš„æ•°æœ‰å¤šå°‘ä¸ªï¼Œæˆ‘ä»¬ç§° $1 <= --1-- <= abcde$ å…³ç³»ä¸ºã€Œå¤§å°è¦æ±‚ã€ã€‚

æˆ‘ä»¬åªéœ€å¯¹ $c$ å‰åå‡ºç°çš„å€¼è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼š

* å½“ $c$ å‰é¢çš„éƒ¨åˆ† $< ab$ï¼Œå³èŒƒå›´ä¸º $[0, ab)$ï¼Œæ­¤æ—¶å¿…ç„¶æ»¡è¶³ã€Œå¤§å°è¦æ±‚ã€ï¼Œå› æ­¤åé¢çš„éƒ¨åˆ†å¯ä»¥ä»»æ„å–ï¼Œå³èŒƒå›´ä¸º $[0, 99]$ã€‚æ ¹æ®ã€Œä¹˜æ³•åŸç†ã€ï¼Œå¯å¾—çŸ¥æ­¤æ—¶æ•°é‡ä¸º $ab * 100$ï¼›
* å½“ $c$ å‰é¢çš„éƒ¨åˆ† $= ab$ï¼Œè¿™æ—¶å€™ã€Œå¤§å°å…³ç³»ã€ä¸»è¦å–å†³äº $c$ï¼š
    * å½“ $c = 0$ï¼Œå¿…ç„¶ä¸æ»¡è¶³ã€Œå¤§å°è¦æ±‚ã€ï¼Œæ•°é‡ä¸º $0$ï¼›
    * å½“ $c = 1$ï¼Œæ­¤æ—¶ã€Œå¤§å°å…³ç³»ã€å–å†³äºåéƒ¨åˆ†ï¼Œåé¢çš„å–å€¼èŒƒå›´ä¸º $[0, de]$ï¼Œæ•°é‡ä¸º $1 * (de + 1)$ï¼›
    * å½“ $c > 1$ï¼Œå¿…ç„¶æ»¡è¶³ã€Œå¤§å°å…³ç³»ã€ï¼Œåé¢çš„éƒ¨åˆ†å¯ä»¥ä»»æ„å–ï¼Œå³èŒƒå›´ä¸º $[0, 99]$ï¼Œæ•°é‡ä¸º $1 * 100$ï¼›
* å½“ $c$ å‰é¢çš„éƒ¨åˆ† $> ab$ï¼Œå¿…ç„¶ä¸æ»¡è¶³ã€Œå¤§å°è¦æ±‚ã€ï¼Œæ•°é‡ä¸º $0$ã€‚

å…¶ä»–æ•°ä½çš„åˆ†æåŒç†ã€‚

ä»£ç ï¼š
```Java
class Solution {
    public int countDigitOne(int n) {
        String s = String.valueOf(n);
        int m = s.length();
        if (m == 1) return n > 0 ? 1 : 0;
        // è®¡ç®—ç¬¬ i ä½å‰ç¼€ä»£è¡¨çš„æ•°å€¼ï¼Œå’Œåç¼€ä»£è¡¨çš„æ•°å€¼
        // ä¾‹å¦‚ abcde åˆ™æœ‰ ps[2] = ab; ss[2] = de
        int[] ps = new int[m], ss = new int[m];
        ss[0] = Integer.parseInt(s.substring(1));
        for (int i = 1; i < m - 1; i++) {
            ps[i] = Integer.parseInt(s.substring(0, i));
            ss[i] = Integer.parseInt(s.substring(i + 1));
        }
        ps[m - 1] = Integer.parseInt(s.substring(0, m - 1));
        // åˆ†æƒ…å†µè®¨è®º
        int ans = 0;
        for (int i = 0; i < m; i++) {
            // x ä¸ºå½“å‰ä½æ•°å€¼ï¼Œlen ä¸ºå½“å‰ä½åé¢é•¿åº¦ä¸ºå¤šå°‘
            int x = s.charAt(i) - '0', len = m - i - 1;
            int prefix = ps[i], suffix = ss[i];
            int tot = 0;
            tot += prefix * Math.pow(10, len);
            if (x == 0) {
            } else if (x == 1) {
                tot += suffix + 1;
            } else {
                tot += Math.pow(10, len);
            }
            ans += tot;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.233` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆå°†æ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

