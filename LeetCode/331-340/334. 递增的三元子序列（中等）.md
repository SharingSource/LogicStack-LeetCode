### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[334. é€’å¢çš„ä¸‰å…ƒå­åºåˆ—](https://leetcode-cn.com/problems/increasing-triplet-subsequence/solution/gong-shui-san-xie-zui-chang-shang-sheng-xa08h/)** ï¼Œéš¾åº¦ä¸º **ä¸­ç­‰**ã€‚

Tag : ã€ŒLISã€ã€ã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€ã€ã€Œè´ªå¿ƒã€ã€ã€ŒäºŒåˆ†ã€



ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `nums`ï¼Œåˆ¤æ–­è¿™ä¸ªæ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨é•¿åº¦ä¸º $3$ çš„é€’å¢å­åºåˆ—ã€‚

å¦‚æœå­˜åœ¨è¿™æ ·çš„ä¸‰å…ƒç»„ä¸‹æ ‡ `(i, j, k)`Â ä¸”æ»¡è¶³ `i < j < k` ï¼Œä½¿å¾—Â `nums[i] < nums[j] < nums[k]` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false`ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [1,2,3,4,5]

è¾“å‡ºï¼štrue

è§£é‡Šï¼šä»»ä½• i < j < k çš„ä¸‰å…ƒç»„éƒ½æ»¡è¶³é¢˜æ„
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [5,4,3,2,1]

è¾“å‡ºï¼šfalse

è§£é‡Šï¼šä¸å­˜åœ¨æ»¡è¶³é¢˜æ„çš„ä¸‰å…ƒç»„
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šnums = [2,1,5,0,4,6]

è¾“å‡ºï¼štrue

è§£é‡Šï¼šä¸‰å…ƒç»„ (3, 4, 5) æ»¡è¶³é¢˜æ„ï¼Œå› ä¸º nums[3] == 0 < nums[4] == 4 < nums[5] == 6
```

æç¤ºï¼š
* $1 <= nums.length <= 5 * 10^5$
* $-2^{31} <= nums[i] <= 2^{31} - 1$

è¿›é˜¶ï¼šä½ èƒ½å®ç°æ—¶é—´å¤æ‚åº¦ä¸º $O(n$) ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(1)$ çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ

---

### æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆè´ªå¿ƒ + äºŒåˆ†ï¼‰

é¢˜ç›®è¦æˆ‘ä»¬åˆ¤æ–­æ˜¯å¦å­˜åœ¨é•¿åº¦ä¸º $3$ çš„ä¸Šå‡å­åºåˆ—ï¼Œé—®é¢˜å¯ä»¥è½¬æ¢ä¸ºæ±‚ $nums$ çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆ`LIS` é—®é¢˜ï¼‰çš„é•¿åº¦ã€‚

å¦‚æœ $nums$ çš„æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦å¤§äºç­‰äº $3$ï¼Œé‚£ä¹ˆåŸé—®é¢˜ç­”æ¡ˆä¸º `True`ï¼Œå¦åˆ™ä¸º `False`ã€‚

è€Œæ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—çš„æœ€ä¼˜è§£æ˜¯æœ‰åŸºäºã€Œè´ªå¿ƒ + äºŒåˆ†ã€çš„ $O(n\log{n})$ åšæ³•ï¼Œå¯¹æ­¤ä¸äº†è§£çš„åŒå­¦ï¼Œå¯ä»¥å…ˆçœ‹å‰ç½® ğŸ§€ ï¼š[LCS é—®é¢˜ä¸ LIS é—®é¢˜çš„ç›¸äº’å…³ç³»ï¼Œä»¥åŠ LIS é—®é¢˜çš„æœ€ä¼˜è§£è¯æ˜](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487814&idx=1&sn=e33023c2d474ff75af83eda1c4d01892&chksm=fd9cba59caeb334f1fbfa1aefd3d9b2ab6abfccfcab8cb1dbff93191ae9b787e1b4681bbbde3&token=252055586&lang=zh_CN#rd)ï¼Œé‡Œé¢è¯¦ç»†è®²è§£äº† `LIS` çš„è´ªå¿ƒè§£è¯æ˜ï¼Œä»¥åŠä¸æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆ`LCS` é—®é¢˜ï¼‰çš„ç›¸äº’å…³ç³»ï¼Œæœ¬æ¬¡ä¸å†èµ˜è¿°ã€‚

**ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨éå†æ¯ä¸ªæ•° $nums[i]$ çš„åŒæ—¶ï¼Œç»´æŠ¤ä¸€ä¸ªå…·æœ‰å•è°ƒæ€§çš„ $f[]$ æ•°ç»„ï¼Œå…¶ä¸­ $f[len] = x$ ä»£è¡¨é•¿åº¦ä¸º $len$ çš„æœ€é•¿ä¸Šå‡å­åºåˆ—æœ€å°ç»“å°¾å…ƒç´ ä¸º $x$ï¼Œå¯ä»¥è¯æ˜ $f$ æ•°ç»„å…·æœ‰å•è°ƒæ€§ï¼ˆçœ‹ [å‰ç½®ğŸ§€](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487814&idx=1&sn=e33023c2d474ff75af83eda1c4d01892&chksm=fd9cba59caeb334f1fbfa1aefd3d9b2ab6abfccfcab8cb1dbff93191ae9b787e1b4681bbbde3&token=252055586&lang=zh_CN#rd)ï¼‰ï¼Œå› æ­¤æ¯æ¬¡å¯ä»¥é€šè¿‡äºŒåˆ†æ‰¾åˆ°å°äº $nums[i]$ çš„æœ€å¤§ä¸‹æ ‡ï¼Œæ¥ä½œä¸º $nums[i]$ çš„å‰ä¸€ä¸ªæ•°ã€‚**

ç»¼ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨ `LIS` çš„ã€Œè´ªå¿ƒ + äºŒåˆ†ã€åšæ³•æ±‚å¾—æœ€é•¿ä¸Šå‡å­åºåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œç„¶åå’Œ $3$ æ¯”è¾ƒå³å¯å¾—å‡ºç­”æ¡ˆã€‚

**ä»£ç ï¼ˆæ„Ÿè°¢ [@ğŸ­å¯ä¹å¯ä¹å—QAQ](/u/littletime_cc/) åŒå­¦æä¾›çš„å…¶ä»–è¯­è¨€ç‰ˆæœ¬ï¼‰ï¼š**
```Java
class Solution {
    public boolean increasingTriplet(int[] nums) {
        int n = nums.length, ans = 1;
        int[] f = new int[n + 1];
        Arrays.fill(f, 0x3f3f3f3f);
        for (int i = 0; i < n; i++) {
            int t = nums[i];
            int l = 1, r = i + 1;
            while (l < r) {
                int mid = l + r >> 1;
                if (f[mid] >= t) r = mid;
                else l = mid + 1;
            }
            f[r] = t;
            ans = Math.max(ans, r);
        }
        return ans >= 3;
    }
}
```
-
```C++
class Solution {
public:
    bool increasingTriplet(vector<int>& nums) {
        int n = nums.size(), ans = 1;
        vector<int> f(n + 1, INT_MAX);
        for(int i = 0; i < n; i++){
            int t = nums[i];
            int L = 1, R = i + 1;
            while(L < R){
                int mid = L + R >> 1;
                if(f[mid] >= t) R = mid;
                else L = mid + 1;
            }
            f[R] = t;
            ans = max(ans, R);
        }
        return ans >= 3;
    }
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

### ä¼˜åŒ– : å®šé•¿ä¸Šå‡å­åºåˆ—ï¼ˆè´ªå¿ƒï¼‰

åˆ©ç”¨æœ¬é¢˜åªéœ€è¦æˆ‘ä»¬åˆ¤å®šæ˜¯å¦å­˜åœ¨é•¿åº¦ä¸º $3$ çš„ä¸Šå‡å­åºåˆ—ï¼Œè€Œä¸éœ€è¦å›ç­” `LIS` æœ€å¤§é•¿åº¦ã€‚

æˆ‘ä»¬å¯ä»¥å¯¹ $f$ æ•°ç»„è¿›è¡Œä¼˜åŒ–ï¼š**ä½¿ç”¨æœ‰é™å˜é‡è¿›è¡Œæ›¿æ¢ï¼ˆå°† $f$ æ•°ç»„çš„é•¿åº¦å‹ç¼©ä¸º $2$ï¼‰ï¼Œæ•°ç»„å«ä¹‰ä¸å˜ï¼Œ$f[1] = x$ ä»£è¡¨é•¿åº¦ä¸º $1$ çš„ä¸Šå‡å­åºåˆ—æœ€å°ç»“å°¾å…ƒç´ ä¸º $x$ï¼Œ$f[2] = y$ ä»£è¡¨é•¿åº¦ä¸º $2$ çš„ä¸Šå‡å­åºåˆ—çš„æœ€å°ç»“å°¾å…ƒç´ ä¸º $y$ã€‚**

**ä»å‰å¾€åæ‰«ææ¯ä¸ª $nums[i]$ï¼Œæ¯æ¬¡å°† $nums[i]$ åˆ†åˆ«ä¸ $f[1]$ å’Œ $f[2]$ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœèƒ½å¤Ÿæ»¡è¶³ $nums[i] > f[2]$ï¼Œä»£è¡¨ $nums[i]$ èƒ½å¤Ÿæ¥åœ¨é•¿åº¦ä¸º $2$ çš„ä¸Šå‡å­åºåˆ—çš„åé¢ï¼Œç›´æ¥è¿”å› `True`ï¼Œå¦åˆ™å°è¯•ä½¿ç”¨ $nums[i]$ æ¥æ›´æ–° $f[1]$ å’Œ $f[2]ã€‚$**

è¿™æ ·ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†æœ‰é™å˜é‡ï¼Œæ¯æ¬¡å¤„ç† $nums[i]$ åªéœ€è¦å’Œæœ‰é™å˜é‡è¿›è¡Œæ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(1)$ã€‚

**ä»£ç ï¼ˆæ„Ÿè°¢ [@ğŸ­å¯ä¹å¯ä¹å—QAQ](/u/littletime_cc/) å’Œ [@Benhao](/u/himymben/) åŒå­¦æä¾›çš„å…¶ä»–è¯­è¨€ç‰ˆæœ¬ï¼‰ï¼š**
```Java
class Solution {
    public boolean increasingTriplet(int[] nums) {
        int n = nums.length;
        long[] f = new long[3];
        f[1] = f[2] = (int)1e19;
        for (int i = 0; i < n; i++) {
            int t = nums[i];
            if (f[2] < t) return true;
            else if (f[1] < t && t < f[2]) f[2] = t;
            else if (f[1] > t) f[1] = t;
        }
        return false;
    }
}
```
-
```Python
class Solution:
    def increasingTriplet(self, nums: List[int]) -> bool:
        n = len(nums)
        f = [inf] * 3
        for i in range(n):
            t = nums[i]
            if f[2] < t:
                return True
            elif f[1] < t < f[2]:
                f[2] = t
            elif f[1] > t:
                f[1] = t
        return False
```
-
```Go
func increasingTriplet(nums []int) bool {
    n := len(nums)
    f := []int{math.MaxInt32,math.MaxInt32,math.MaxInt32}
    for i := 0; i < n; i++ {
        t := nums[i]
        if f[2] < t{
            return true
        } else if f[1] < t && t < f[2]{
            f[2] = t
        } else if f[1] > t {
            f[1] = t
        }
    }
    return false
}
```
-
```C++
class Solution {
public:
    bool increasingTriplet(vector<int>& nums) {
        int n = nums.size();
        vector<int> f(3, INT_MAX);
        for(int i = 0; i < n; i++){
            int t = nums[i];
            if(f[2] < t) return true;
            else if(f[1] < t and t < f[2]) f[2] = t;
            else if(f[1] > t) f[1] = t;
        }
        return false;
    }
};
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.334` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆæŠŠæ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

